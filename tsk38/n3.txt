–ó—Ä–æ–∑—É–º—ñ–≤ ‚úÖ. –£ –≤–∞—Å –≤–∂–µ —î –≤–µ–ª–∏–∫–∏–π –±–ª–æ–∫ –ø–æ–±—É–¥–æ–≤–∏ –∫–∞—Ä—Ç–∫–∏, –¥–µ –≤–∏ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç–µ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –¥–ª—è **group1** (–ø–æ—Å–∞–¥–∞+–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç+unit), **group2** (–≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å –ø–æ —Ç–∞–±–µ–ª—å–Ω–æ–º—É) —ñ —Ç–µ–ø–µ—Ä —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ —â–µ **group3** (–∑–º—ñ–Ω–∞ / shift).

–¢–æ–±—Ç–æ –ª–æ–≥—ñ–∫–∞ —Ç–∞–∫–∞:

* **group3** = –∫–æ–ª–∏ `l_list_position IS NULL`, `l_list_department IS NULL`, `l_list_unit IS NULL`, `l_list_tab_no IS NULL`, –∞–ª–µ `l_shift_id` (—É –≤–∞—Å –≤—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `c013`/`c014`?) –∑–∞–¥–∞–Ω–∏–π.
* –¢–æ–¥—ñ —Ç—Ä–µ–±–∞:

  1. –í–∏—Ç—è–≥–Ω—É—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞–∑–≤–∏ –∑–º—ñ–Ω–∏ (`SHIFT_CODE` –∞–±–æ `SHIFT_NAME`) –∑ —Ç–∞–±–ª–∏—Ü—ñ `SHIFTS`.
  2. –í—ñ–¥—Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –≤ –∫–∞—Ä—Ç—Ü—ñ `"SHIFT ‚Äì <–Ω–∞–∑–≤–∞>"`.
  3. –í–∏–∫–æ–Ω–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ ‚Äú–≤—ñ–¥–º—ñ—Ç–∫–∞ –≤—ñ–¥ —ñ–º–µ–Ω—ñ‚Äù –¥–ª—è group2, —ñ —è–∫—â–æ –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –ø—Ä–∞–≤–æ, –ø–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É `"–í—ñ–¥–º—ñ—Ç–∫–∞ –≤—ñ–¥ —ñ–º–µ–Ω—ñ"`.

---

### üîπ –ü—Ä–∏–∫–ª–∞–¥ –≤—Å—Ç–∞–≤–∫–∏ –±–ª–æ–∫—É –¥–ª—è **group3**

–£ –≤–∞—à–æ–º—É —Ü–∏–∫–ª—ñ –ø–æ `confirm_list` –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ –¥–æ–¥–∞–π—Ç–µ:

```plsql
ELSIF l_list_position IS NULL 
   AND l_list_department IS NULL 
   AND l_list_unit IS NULL 
   AND l_list_tab_no IS NULL 
   AND l_list_shift_id IS NOT NULL THEN   -- üîπ –Ω–æ–≤–∞ —É–º–æ–≤–∞ –¥–ª—è group3

   DECLARE
       v_shift_name SHIFTS.SHIFT_CODE%TYPE;
   BEGIN
       BEGIN
           SELECT s.SHIFT_CODE
             INTO v_shift_name
             FROM SHIFTS s
            WHERE s.SHIFT_ID = l_list_shift_id;
       EXCEPTION
           WHEN NO_DATA_FOUND THEN
               v_shift_name := '–ù–µ–≤—ñ–¥–æ–º–∞ –∑–º—ñ–Ω–∞';
       END;

       -- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –∫–∞—Ä—Ç—Ü—ñ
       HTP.P('<span class="shift-label">SHIFT - ' || v_shift_name || '</span>');

       -- üîπ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Ä–æ–ª—å / –¥–æ—Å—Ç—É–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Å–ø—Ä–æ—â–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥)
       -- —É–º–æ–≤–∞ –¥–ª—è "–í—ñ–¥–º—ñ—Ç–∫–∞ –≤—ñ–¥ —ñ–º–µ–Ω—ñ"
       IF l_count_cb = 0 THEN
           HTP.P('<button id="sign-byname-btn" data-signature-id="'|| l_signature_id ||'" class="byname-signature-button">–í—ñ–¥–º—ñ—Ç–∫–∞ –≤—ñ–¥ —ñ–º–µ–Ω—ñ</button>');
           l_count_cb := l_count_cb + 1;
       ELSE
           HTP.P('<span class="wait-confirm-signature-text">–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏</span>');
       END IF;
   END;
```

---

### üîπ –©–æ —Ü–µ –¥–∞—î

1. –Ø–∫—â–æ —É –≤–∞—Å –∑–∞–ø–∏—Å –∑–±–µ—Ä—ñ–≥—Å—è —è–∫ **group3** (–±–µ–∑ position, department, unit, tab\_no, –∞–ª–µ –∑ shift\_id) ‚Üí –≤ –∫–∞—Ä—Ç—Ü—ñ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å—Å—è

   ```
   SHIFT ‚Äì A
   ```

   (–¥–µ A ‚Äì –∑–Ω–∞—á–µ–Ω–Ω—è `SHIFT_CODE` –∑ —Ç–∞–±–ª–∏—Ü—ñ `SHIFTS`).

2. –Ø–∫—â–æ –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —É–º–æ–≤–∞–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –ø—Ä–æ–ø–∏—à–µ—Ç–µ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —è–∫ —É group2), —Ç–æ –±—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞:

   ```
   [–í—ñ–¥–º—ñ—Ç–∫–∞ –≤—ñ–¥ —ñ–º–µ–Ω—ñ]
   ```

3. –õ–æ–≥—ñ–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏ –º–æ–∂–µ—Ç–µ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∑–∞–≥–∞–ª—ñ –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Ü—å–æ–≥–æ shift (—á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—é `DEPARTMENT_SHIFTS` –∞–±–æ ACL).

---

–•–æ—á–µ—Ç–µ, —è —ñ–Ω—Ç–µ–≥—Ä—É—é —Ü–µ–π –±–ª–æ–∫ –ø—Ä—è–º–æ –≤ –≤–∞—à –≤–µ–ª–∏–∫–∏–π –∫–æ–¥, —â–æ–± –≤—ñ–Ω —Å—Ç–∞–≤ ‚Äú—â–µ –æ–¥–Ω–∏–º ELSIF‚Äù –ø–æ—Ä—É—á —ñ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é `l_list_tab_no IS NOT NULL` (group2)?
