–ß—É–¥–æ–≤–æ üëå, —Ç–æ–¥—ñ –¥–ª—è **`shift_id`** —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ **–¥–∑–µ—Ä–∫–∞–ª—å–Ω–∏–π –±–ª–æ–∫**, —è–∫ —É –≤–∞—Å –¥–ª—è `tab_no`.

–¢–æ–±—Ç–æ:

* —É–º–æ–≤–∞ `ELSIF` –ª–æ–≤–∏—Ç—å –≤–∏–ø–∞–¥–æ–∫, –∫–æ–ª–∏ `position_id`, `department_id`, `unit_id`, `tab_no` = `NULL`, –∞–ª–µ `shift_id` –∑–∞–ø–æ–≤–Ω–µ–Ω–æ;
* –¥–∞–ª—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: —è–∫—â–æ `l_list_shift_id = l_current_user_shift_id`, —Ç–æ–¥—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –ø—Ä–∞–≤–æ (–∞–Ω–∞–ª–æ–≥ `l_is_tabno`).

---

### üîπ –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É (–∞–Ω–∞–ª–æ–≥ tab\_no)

```plsql
ELSIF l_list_position_id IS NULL 
  AND l_list_department_id IS NULL 
  AND l_list_unit_id IS NULL 
  AND l_list_tab_no IS NULL 
  AND l_list_shift_id IS NOT NULL THEN   -- –≥—Ä—É–ø–∞ 3: SHIFT

   -- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –ø–æ –∑–º—ñ–Ω—ñ
   IF l_list_shift_id = l_current_user_shift_id THEN
      l_is_shift := true;
   ELSE
      l_is_shift := false;
   END IF;

   l_is_role := l_is_shift;

   IF l_is_role AND l_count_cb = 0 THEN
      HTP.P('<button id="signature-btn" data-signature-id="'|| l_signature_id || '" class="confirm-signature-button">' 
             || l_substage_btn_text || '</button>');
      l_count_cb := l_count_cb + 1;

   ELSIF l_is_role AND l_count_cb > 0 THEN
      HTP.P('<span class="wait-confirm-signature-text">–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏</span>');

   ELSIF NOT l_is_role AND l_count_cb = 0 THEN
      HTP.P('<span class="wait-confirm-signature-text wait-confirm-signature-text-current">–†–æ–∑–≥–ª—è–¥–∞—î</span>');
      l_count_cb := l_count_cb + 1;

   ELSIF NOT l_is_role AND l_count_cb > 0 THEN
      HTP.P('<span class="wait-confirm-signature-text">–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏</span>');
   END IF;
END IF;
```

---

### üîπ –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏

1. –£ –≤–∞—Å –º–∞—î –±—É—Ç–∏ –∑–º—ñ–Ω–Ω–∞ `l_current_user_shift_id` (–∑–∞ –∞–Ω–∞–ª–æ–≥—ñ—î—é –∑ `l_current_user_tabno_gl`).

   * –¶–µ –∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∞–±–æ –≤ –ª–æ–≥—ñ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—è–∫—É –∑–º—ñ–Ω—É –≤—ñ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î).
2. –í `APEX_COLLECTION` –º–∞—î –±—É—Ç–∏ –∫–æ–ª–æ–Ω–∫–∞, –¥–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è `shift_id` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `c015`), —è–∫—É –≤–∏ –º–∞–ø–∏—Ç–µ —É `l_list_shift_id`.

---

üëâ –•–æ—á–µ—Ç–µ, —è –ø–æ–∫–∞–∂—É, —è–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–¥–∞—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é `l_current_user_shift_id` –Ω–∞ –ø–æ—á–∞—Ç–∫—É –≤–∞—à–æ–≥–æ –∫–æ–¥—É (—Ç–∞–º, –¥–µ —É –≤–∞—Å `l_current_user_tabno_gl`, `l_current_user_position_gl`, `l_current_user_department_g1`)?
