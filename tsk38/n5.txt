–¢–∞–∫, –≤–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∏—Å–ª–∏—Ç–µ üëç. –£ —Ü—å–æ–º—É –º—ñ—Å—Ü—ñ, –¥–µ —É –≤–∞—Å `ELSE` –¥–ª—è –≤–∏–≤–æ–¥—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É, –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –¥–ª—è `l_shift_id`.

–ó–∞—Ä–∞–∑ —É –≤–∞—Å –±–ª–æ–∫ —Ç–∞–∫–∏–π:

```plsql
ELSE
   HTP.P('<li data-cl-order="' || l_order_counter || *" data-sq-ord="' || l_list_id || '"-class="confirm-list-li">');
   HTP.P('< span class="number"></span>' || 
         '<span class="pos-info"><span class="l-list-position">' || l_list_position || '</span>' || l_dep_unit || '< /span>');
   HTP.P('<span class="confirm-list-buttons"> ... </span>');
   HTP.P('</li>');
END IF;
```

---

### üîπ –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –∑ –æ–±—Ä–æ–±–∫–æ—é `l_shift_id`

```plsql
ELSE
   DECLARE
      v_shift_name SHIFTS.SHIFT_CODE%TYPE;
   BEGIN
      -- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —è–∫—â–æ –Ω–µ–º–∞—î pos/dep/unit, –∞–ª–µ —î shift_id
      IF l_list_position IS NULL 
         AND l_list_department IS NULL 
         AND l_list_unit IS NULL 
         AND l_sg_history_id IS NULL   -- –Ω–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å–∞–Ω—Ç, –Ω–µ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –≤ —ñ—Å—Ç–æ—Ä—ñ—ó
         AND l_list_shift_id IS NOT NULL THEN

         BEGIN
            SELECT s.SHIFT_CODE || CASE WHEN s.SHIFT_NAME IS NOT NULL THEN ' - ' || s.SHIFT_NAME ELSE '' END
              INTO v_shift_name
              FROM SHIFTS s
             WHERE s.SHIFT_ID = l_list_shift_id;
         EXCEPTION
            WHEN NO_DATA_FOUND THEN
               v_shift_name := 'SHIFT - –ù–µ–≤—ñ–¥–æ–º–∞ –∑–º—ñ–Ω–∞';
         END;

         -- –§–æ—Ä–º—É—î–º–æ li –¥–ª—è –∑–º—ñ–Ω–∏
         HTP.P('<li data-cl-order="' || l_order_counter || '" data-sq-ord="' || l_list_id || '" class="confirm-list-li">');
         HTP.P('<span class="number"></span>' || 
               '<span class="pos-info"><span class="l-list-position">SHIFT - ' || v_shift_name || '</span></span>');
         HTP.P('<span class="confirm-list-buttons">' ||
               '<button class="confirm-list-button-up"></button>' ||
               '<button class="confirm-list-button-down"></button>' ||
               '<button data-list-id="' || l_list_id || '" data-step="' || l_substage_id || '" ' ||
               'data-coll-name="ADD_PERMIT_' || l_stage_id || '_' || l_substage_id || '" class="confirm-list-remove-button"></button>' ||
               '</span>');
         HTP.P('</li>');

      ELSE
         -- —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —è–∫ —É –≤–∞—Å –±—É–≤
         HTP.P('<li data-cl-order="' || l_order_counter || '" data-sq-ord="' || l_list_id || '" class="confirm-list-li">');
         HTP.P('<span class="number"></span>' || 
               '<span class="pos-info"><span class="l-list-position">' || l_list_position || '</span>' || l_dep_unit || '</span>');
         HTP.P('<span class="confirm-list-buttons"> ... </span>');
         HTP.P('</li>');
      END IF;
   END;
END IF;
```

---

### üîπ –©–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –±–ª–æ–∫

* –Ø–∫—â–æ —É –∑–∞–ø–∏—Å—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ **pos/dep/unit**, –∞–ª–µ –ø—Ä–∏—Å—É—Ç–Ω—ñ–π **`l_list_shift_id`** ‚Üí —Ä–æ–±–∏—Ç—å—Å—è `SELECT` –∑ —Ç–∞–±–ª–∏—Ü—ñ `SHIFTS` —ñ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `SHIFT - –ù–∞–∑–≤–∞`.
* –Ø–∫—â–æ —É–º–æ–≤–∞ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è ‚Üí –ø—Ä–∞—Ü—é—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –≤–∏–≤—ñ–¥, —è–∫ –±—É–≤.

---

üëâ –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ª–∏—à–µ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ `l_list_shift_id` –¥—ñ–π—Å–Ω–æ –≤—Ö–æ–¥–∏—Ç—å —É `FETCH confirm_list` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ `c020` –∞–±–æ —ñ–Ω—à—É –∫–æ–ª–æ–Ω–∫—É –∫–æ–ª–µ–∫—Ü—ñ—ó).

–•–æ—á–µ—Ç–µ, —è –ø–æ–∫–∞–∂—É –ø—Ä–∏–∫–ª–∞–¥ SQL –¥–ª—è –≤–∞—à–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó `ADD_PERMIT_‚Ä¶`, –¥–µ –¥–æ–¥–∞—Ç–∏ —â–µ –π `c020` —è–∫ `l_list_shift_id`?
