üíØ –î—É–∂–µ —Å–∏–ª—å–Ω–∏–π —ñ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥!
–ó–∞–º—ñ—Å—Ç—å –∫—ñ–ª—å–∫–æ—Ö –æ–∫—Ä–µ–º–∏—Ö DA, —è–∫—ñ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ (—ñ —á–µ—Ä–µ–∑ —Ü–µ ‚Äú–∑–º–∞–≥–∞—é—Ç—å—Å—è‚Äù, —Ö—Ç–æ –ø–µ—Ä—à–∏–π –æ–Ω–æ–≤–∏—Ç—å –¥–∞–Ω—ñ), —Ç–∏ –º–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ **—î–¥–∏–Ω–∏–π, —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π Dynamic Action**, —è–∫–∏–π –≤—ñ–¥—Å—Ç–µ–∂—É—î –∑–º—ñ–Ω—É **–±—É–¥—å-—è–∫–æ–≥–æ –∑ —Ç—Ä—å–æ—Ö item** ‚Äî `P_DATE`, `P_CHECKBOX_DEPARTMENT`, `P_CHECKBOX_UNIT` ‚Äî —ñ **–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ** –≤–∏–∫–æ–Ω—É—î –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥—ñ—ó.

–ù–∏–∂—á–µ ‚Äî –ø–æ–∫—Ä–æ–∫–æ–≤–æ, —è–∫ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏ –≥—Ä–∞–º–æ—Ç–Ω–æ üëá

---

## üß© 1. –û–¥–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π Dynamic Action

**Name:** `DA_REFRESH_ALL`
**Event:** *Change*
**Selection Type:** *Item(s)*
**Items:**

```
P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT
```

‚úÖ –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –æ–¥–∏–Ω DA —Ä–µ–∞–≥—É—î –Ω–∞ –∑–º—ñ–Ω—É –±—É–¥—å-—è–∫–æ–≥–æ –∑ —Ç—Ä—å–æ—Ö item.

---

## ‚öôÔ∏è 2. –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å True Actions (—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É)

–¢–µ–ø–µ—Ä –≥–æ–ª–æ–≤–Ω–µ ‚Äî **–∑—Ä–æ–±–∏—Ç–∏ –¥—ñ—ó —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º–∏ —ñ –ª–æ–≥—ñ—á–Ω–∏–º–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É**.

| ‚Ññ   | Action Type                       | Description                                                                | Wait for Result | Items to Submit                                  |
| --- | --------------------------------- | -------------------------------------------------------------------------- | --------------- | ------------------------------------------------ |
| 1Ô∏è‚É£ | Execute Server-side Code (PL/SQL) | –û–Ω–æ–≤–ª—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Å–µ—Å—ñ—ó –¥–ª—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö item                             | ‚úÖ Yes           | `P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT` |
| 2Ô∏è‚É£ | Refresh                           | –†–µ–≥—ñ–æ–Ω —ñ–∑ —á–µ–∫–±–æ–∫—Å–∞–º–∏ Department *(—è–∫—â–æ –≤—ñ–Ω –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–∞—Ç–∏)*             | ‚úÖ Yes           | `P_DATE`                                         |
| 3Ô∏è‚É£ | Refresh                           | –†–µ–≥—ñ–æ–Ω —ñ–∑ —á–µ–∫–±–æ–∫—Å–∞–º–∏ Unit *(—è–∫—â–æ –≤—ñ–Ω –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ Department)*             | ‚úÖ Yes           | `P_DATE, P_CHECKBOX_DEPARTMENT`                  |
| 4Ô∏è‚É£ | Execute Server-side Code (PL/SQL) | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –∑–∞–ø–∏—Å—ñ–≤ (item `P_RECORD_COUNT`)                       | ‚úÖ Yes           | `P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT` |
| 5Ô∏è‚É£ | Execute JavaScript Code           | –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏/—Å—Ö–æ–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É ‚Äú–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–≤—ñ—Ç‚Äù –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ `P_RECORD_COUNT` | ‚Äî               | ‚Äî                                                |
| 6Ô∏è‚É£ | Refresh                           | –ó–≤—ñ—Ç 1                                                                     | ‚úÖ Yes           | `P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT` |
| 7Ô∏è‚É£ | Refresh                           | –ó–≤—ñ—Ç 2                                                                     | ‚úÖ Yes           | `P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT` |

---

## üîπ 3. –ö–æ–¥ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ PL/SQL Action (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Å—ñ—ó)

> –¶–µ –¥—ñ—è, —è–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î, —â–æ–± —É—Å—ñ —Ç—Ä–∏ item –±—É–ª–∏ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω—ñ –≤ session state –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –±—É–¥—å-—è–∫–∏—Ö –∑–≤—ñ—Ç—ñ–≤.

```plsql
BEGIN
  :P_DATE := :P_DATE;
  :P_CHECKBOX_DEPARTMENT := :P_CHECKBOX_DEPARTMENT;
  :P_CHECKBOX_UNIT := :P_CHECKBOX_UNIT;
END;
```

**Items to Submit:**

```
P_DATE, P_CHECKBOX_DEPARTMENT, P_CHECKBOX_UNIT
```

‚úÖ –¶–µ —Å—Ç–≤–æ—Ä—é—î –º—ñ–Ω—ñ-—Å–∞–±–º—ñ—Ç —ñ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –≤ —Å–µ—Å—ñ—ó –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å—ñ—Ö item.

---

## üîπ 4. –ö–æ–¥ –¥–ª—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –∑–∞–ø–∏—Å—ñ–≤ (Action ‚Ññ4)

```plsql
DECLARE
    v_count NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_count
    FROM external_personal ep
    WHERE TRUNC(ep.date_create) = TRUNC(:P_DATE)
      AND ep.date_end IS NULL
      AND (
          :P_CHECKBOX_DEPARTMENT IS NULL
          OR ep.department_id IN (
              SELECT TO_NUMBER(column_value)
              FROM TABLE(apex_string.split(:P_CHECKBOX_DEPARTMENT, ':'))
          )
      )
      AND (
          :P_CHECKBOX_UNIT IS NULL
          OR ep.unit_id IN (
              SELECT TO_NUMBER(column_value)
              FROM TABLE(apex_string.split(:P_CHECKBOX_UNIT, ':'))
          )
      );

    :P_RECORD_COUNT := v_count;
END;
```

---

## üîπ 5. –ö–æ–¥ –¥–ª—è JavaScript Action (–ø—ñ—Å–ª—è PL/SQL –∑ –ª—ñ—á–∏–ª—å–Ω–∏–∫–æ–º)

```js
if ($v("P_RECORD_COUNT") > 0) {
  $("#download_btn").show();
} else {
  $("#download_btn").hide();
  apex.message.showPageSuccess("–ó–∞–ø–∏—Å—ñ–≤ –Ω–∞ –æ–±—Ä–∞–Ω—É –¥–∞—Ç—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.");
}
```

*(–ø—Ä–∏–ø—É—Å—Ç–∏–º–æ, —É —Ç–µ–±–µ –∫–Ω–æ–ø–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—î Static ID `download_btn`)*

---

## üîπ 6. –í–∞–∂–ª–∏–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä                   | –ó–Ω–∞—á–µ–Ω–Ω—è                                           |
| -------------------------- | -------------------------------------------------- |
| **Wait for Result**        | ‚úÖ –£—Å—ñ PL/SQL —Ç–∞ Refresh –¥—ñ—ó –º–∞—é—Ç—å —Ü–µ –≤–≤—ñ–º–∫–Ω–µ–Ω–æ     |
| **Event Scope**            | *Static*                                           |
| **Fire on Initialization** | ‚ùå Off                                              |
| **Execution Order**        | –í–∫–∞–∑–∞—Ç–∏ –≤—Ä—É—á–Ω—É (—â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–≥—ñ–∫—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ) |

---

## üîπ 7. –î–æ–¥–∞–π –∑–∞—Ç—Ä–∏–º–∫—É –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –∑–≤—ñ—Ç—ñ–≤ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ ‚Äú–æ–¥–Ω–æ–º–æ–º–µ–Ω—Ç–Ω–æ–≥–æ –ø–æ–¥–≤—ñ–π–Ω–æ–≥–æ —Ä–µ—Ñ—Ä–µ—à—É‚Äù, –º–æ–∂–Ω–∞ —É –∑–≤—ñ—Ç–∞—Ö –≤–∏—Å—Ç–∞–≤–∏—Ç–∏:

* **Execute After (milliseconds)** = `300`
  –¥–ª—è –∫—Ä–æ–∫—ñ–≤ ‚Ññ6 —ñ ‚Ññ7 (Refresh).

---

## ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫ ‚Äî —â–æ –æ—Ç—Ä–∏–º–∞—î—à

| –ü–æ–¥—ñ—è                          | –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è                                                |
| ------------------------------ | ----------------------------------------------------------- |
| –ó–º—ñ–Ω–∏–≤ –¥–∞—Ç—É                    | APEX –æ–Ω–æ–≤–∏—Ç—å —Å–µ—Å—ñ—é, –ø–æ—Ç—ñ–º —Ä–µ—Ñ—Ä–µ—à–Ω–µ department, unit —ñ –∑–≤—ñ—Ç–∏ |
| –ó–º—ñ–Ω–∏–≤ department              | –û–Ω–æ–≤–∏—Ç—å —Å–µ—Å—ñ—é, unit —ñ –∑–≤—ñ—Ç–∏                                 |
| –ó–º—ñ–Ω–∏–≤ unit                    | –û–Ω–æ–≤–∏—Ç—å —Å–µ—Å—ñ—é —ñ –∑–≤—ñ—Ç–∏                                       |
| –£—Å–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –±–µ–∑ –Ω–∞–∫–ª–∞–¥–µ–Ω–Ω—è | –ó–Ω–∞—á–µ–Ω–Ω—è –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ                         |

---

üß† **–ì–æ–ª–æ–≤–Ω–∞ —ñ–¥–µ—è**:

> –û–¥–∏–Ω DA ‚Üí —Å–ø—ñ–ª—å–Ω–∏–π —Ç—Ä–∏–≥–µ—Ä (—É—Å—ñ —Ç—Ä–∏ item) ‚Üí –∂–æ—Ä—Å—Ç–∫–æ –≤–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω—ñ –¥—ñ—ó ‚Üí –∫–æ–∂–µ–Ω refresh —á–µ–∫–∞—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π.
> –¶–µ –¥–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–æ—Ä—è–¥–∫–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ –∑–Ω—ñ–º–∞—î —Ä–∏–∑–∏–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—ñ.

---

–•–æ—á–µ—à, —è –∑–≥–µ–Ω–µ—Ä—É—é —Ç–æ–±—ñ –∫–æ—Ä–æ—Ç–∫—É —Ç–∞–±–ª–∏—Ü—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è —Ü—å–æ–≥–æ DA (—Ç–∞–∫, —è–∫ —ó—ó –∑—Ä—É—á–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ —É APEX Builder ‚Äî ‚ÄúEvent / Action / Wait / Items to Submit / Remarks‚Äù)?
