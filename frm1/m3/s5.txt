–û ‚Äî –æ—Å—å —Ç—É—Ç —ñ —î **–∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–±–ª–µ–º–∏** üí°
–¢–µ, —â–æ —Ç–∏ –æ–ø–∏—Å–∞–≤ ‚Äî –∫–ª–∞—Å–∏—á–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –≤—Ç—Ä–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω—å —É —Å–µ—Å—ñ—ó –ø—Ä–∏ ‚Äú–ø–æ–¥–≤—ñ–π–Ω–æ–º—É‚Äù –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ item'—ñ–≤ —á–µ—Ä–µ–∑ *Server-Side Action + Refresh*.

–î–∞–≤–∞–π —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—è —á—ñ—Ç–∫–æ, —á–æ–º—É —Ç–∞–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —ñ —è–∫ —Ü–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –±–µ–∑ –≤—Ç—Ä–∞—Ç.

---

## üî• –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞—Ä–∞–∑ (—Ç–∏–ø–æ–≤–∞ –ø–æ–º–∏–ª–∫–∞)

1. –£ —Ç–µ–±–µ —î **Dynamic Action** –Ω–∞ `Change` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `P_DATE` –∞–±–æ `P_CHECKBOX_DEPARTMENT`).
2. –£ –Ω—ñ–π —î **Server-side action** ‚Üí –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ‚ÄúExecute PL/SQL Code‚Äù, —è–∫–∏–π —Ä–æ–±–∏—Ç—å —â–æ—Å—å —Ç–∏–ø—É:

   ```plsql
   :P_CHECKBOX_DEPARTMENT := :P_CHECKBOX_DEPARTMENT;
   ```

   –∞–±–æ –≤–∏–∫–æ–Ω—É—î —è–∫—ñ—Å—å –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —ñ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ ‚Äî
   ‚ÄúAffect Session State ‚Üí True‚Äù
   (—Ç–æ–±—Ç–æ –∑–∞–ø–∏—Å—É—î –∑–Ω–∞—á–µ–Ω–Ω—è —É —Å–µ—Å—ñ—é).
3. –ü–æ—Ç—ñ–º (—É —Ç—ñ–π —Å–∞–º—ñ–π DA) —ñ–¥–µ **Refresh Region** –¥–ª—è –∑–≤—ñ—Ç—ñ–≤.

üëâ –Ü –æ—Ç —É —Ü–µ–π –º–æ–º–µ–Ω—Ç:

* –ø–µ—Ä—à–∞ –¥—ñ—è (PL/SQL) —â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞ –∑–∞–ø–∏—Å —É —Å–µ—Å—ñ—é,
* –∞ –¥—Ä—É–≥–∞ (Refresh) —É–∂–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Ç –¥–æ –±–∞–∑–∏,
* —É —è–∫–æ–º—É `P_CHECKBOX_DEPARTMENT` (–∞–±–æ `P_CHECKBOX_UNIT`) **—â–µ –Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–∏–π –∞–±–æ —Ç–∏–º—á–∞—Å–æ–≤–æ null**.

–†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –∑–≤—ñ—Ç –º–∞–ª—é—î—Ç—å—Å—è –ø–æ—Ä–æ–∂–Ω—ñ–º.

---

## ‚úÖ –Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ (—â–æ–± APEX –Ω–µ ‚Äú–∑–∞—Ç–∏—Ä–∞–≤‚Äù –∑–Ω–∞—á–µ–Ω–Ω—è)

### üîπ –í–ê–†–Ü–ê–ù–¢ 1 ‚Äî –ü–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∏–±—Ä–∞—Ç–∏ PL/SQL –æ–Ω–æ–≤–ª–µ–Ω–Ω—è item —É —Å–µ—Å—ñ—ó

APEX **—Å–∞–º –æ–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è item —É —Å–µ—Å—ñ—ó** –ø—ñ—Å–ª—è –ø–æ–¥—ñ—ó `Change`.
–¢–æ–º—É —Ç–æ–±—ñ **–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ** –≤—Ä—É—á–Ω—É –ø–∏—Å–∞—Ç–∏ `:P_ITEM := :P_ITEM;` –∞–±–æ `APEX_UTIL.SET_SESSION_STATE`.

> üî∏ –Ø–∫—â–æ —Ç–∏ —Ä–æ–±–∏—à —Ü–µ –ª–∏—à–µ ‚Äú—â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ –≤ —Å–µ—Å—ñ—é‚Äù ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–±–µ—Ä–∏ —Ü—é –¥—ñ—é.
> –ó–Ω–∞—á–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ —Ç—Ä–∏–≥–µ—Ä—ñ –ø–æ–¥—ñ—ó `Change`.

---

### üîπ –í–ê–†–Ü–ê–ù–¢ 2 ‚Äî –Ø–∫—â–æ PL/SQL –≤—Å–µ –∂ –ø–æ—Ç—Ä—ñ–±–µ–Ω (—â–æ—Å—å –æ–±—á–∏—Å–ª—é—î)

–¢–æ–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. –£ PL/SQL –ø—Ä–æ—Ü–µ—Å—ñ —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç–∏:

   ```plsql
   :P_CHECKBOX_DEPARTMENT := NVL(:P_CHECKBOX_DEPARTMENT, :P_LAST_DEPARTMENT);
   :P_LAST_DEPARTMENT := :P_CHECKBOX_DEPARTMENT;
   ```

   ‚Äî —â–æ–± **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤—Ç—Ä–∞—á–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è**, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–æ–Ω–æ —Ç–∏–º—á–∞—Å–æ–≤–æ null.

2. –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å **‚ÄúWait for Result = Yes‚Äù** ‚Äî –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ.

3. –£—Å—ñ **Refresh –¥—ñ—ó** –º–∞—é—Ç—å —Å—Ç–æ—è—Ç–∏ *–ø—ñ—Å–ª—è* —Ü—å–æ–≥–æ PL/SQL –±–ª–æ–∫—É.

4. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ item –æ–¥–Ω–æ—á–∞—Å–Ω–æ ‚Äî —Ä–æ–±–∏ —Ü–µ –≤ **–æ–¥–Ω–æ–º—É PL/SQL –±–ª–æ—Ü—ñ**, –∞ –Ω–µ –≤ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö DA.

---

### üîπ –í–ê–†–Ü–ê–ù–¢ 3 ‚Äî –Ø–∫—â–æ —î –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è –∫—ñ–ª—å–∫–æ—Ö DA

–ë—É–≤–∞—î, —â–æ:

* DA –Ω–∞ `Change` `P_DATE` ‚Üí –∑–º—ñ–Ω—é—î `P_CHECKBOX_DEPARTMENT`
* DA –Ω–∞ `Change` `P_CHECKBOX_DEPARTMENT` ‚Üí –∑–º—ñ–Ω—é—î `P_CHECKBOX_UNIT`
* DA –Ω–∞ `Change` `P_CHECKBOX_UNIT` ‚Üí –æ–Ω–æ–≤–ª—é—î –∑–≤—ñ—Ç–∏

–¢–æ–¥—ñ, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤:

1. –£ –∫–æ–∂–Ω–æ–º—É DA –≤–∏–º–∫–Ω–∏ **‚ÄúFire on Initialization‚Äù** ‚Äî —ñ–Ω–∞–∫—à–µ APEX –º–æ–∂–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ DA –ø—ñ–¥ —á–∞—Å –ø–µ—Ä—à–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏, –∫–æ–ª–∏ —â–µ –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö.
2. –î–æ–¥–∞–π **Client-side delay (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 300‚Äì500ms)** –ø–µ—Ä–µ–¥ —Ä–µ—Ñ—Ä–µ—à–∞–º–∏:

   * –£ ‚ÄúRefresh Action‚Äù ‚Üí *Advanced ‚Üí Execute After (milliseconds) = 300*
     –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å APEX –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–Ω–æ–≤–∏—Ç–∏ item state –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Ç–æ–º —É –ë–î.

---

### üîπ –í–ê–†–Ü–ê–ù–¢ 4 ‚Äî –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `apex.server.process` –∑–∞–º—ñ—Å—Ç—å PL/SQL Action

–Ø–∫—â–æ —Ç–æ–±—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ —è–∫–∏–π—Å—å —Å–µ—Ä–≤–µ—Ä–Ω–∏–π –∫–æ–¥ *—ñ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —É —Å–µ—Å—ñ—ó*, –∫—Ä–∞—â–µ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ —á–µ—Ä–µ–∑ JavaScript, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```js
apex.server.process(
  "SYNC_STATE",
  { pageItems: ["P_DATE", "P_CHECKBOX_DEPARTMENT", "P_CHECKBOX_UNIT"] },
  {
    success: function(pData){
      // –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î–º–æ –∑–≤—ñ—Ç–∏
      apex.region("report_1").refresh();
      apex.region("report_2").refresh();
    }
  }
);
```

–¢–æ–¥—ñ —Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ–Ω—Ç—Ä–æ–ª—é—î—à –ø–æ—Ä—è–¥–æ–∫:
—Å–ø–æ—á–∞—Ç–∫—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ‚Üí –ø–æ—Ç—ñ–º –∑–≤—ñ—Ç–∏.

---

## üîπ –ü—ñ–¥—Å—É–º—É—î–º–æ

| –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞                                            | –ü—Ä–∏—á–∏–Ω–∞                                                  | –†—ñ—à–µ–Ω–Ω—è                                                        |
| ----------------------------------------------------------- | -------------------------------------------------------- | -------------------------------------------------------------- |
| –í—Ç—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω—å `unit` / `department` –ø—ñ—Å–ª—è –∫—ñ–ª—å–∫–æ—Ö –æ–Ω–æ–≤–ª–µ–Ω—å | ‚ÄúExecute PL/SQL‚Äù —ñ–∑ –∑–∞–ø–∏—Å–æ–º —É —Å–µ—Å—ñ—é —ñ –æ–¥–Ω–æ—á–∞—Å–Ω–∏–π Refresh | –∞–±–æ –ø—Ä–∏–±—Ä–∞—Ç–∏ PL/SQL, –∞–±–æ –∑—Ä–æ–±–∏—Ç–∏ Wait + –∑–∞—Ç—Ä–∏–º–∫—É –ø–µ—Ä–µ–¥ Refresh |
| –ó–≤—ñ—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –¥–∞—Ç–∏                              | –ë–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è item                             | –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å Date ‚Üí Department ‚Üí Unit ‚Üí Reports    |
| –ó–Ω–∞—á–µ–Ω–Ω—è `NULL` —É —Å–µ—Å—ñ—ó                                     | Item —â–µ –Ω–µ –æ–Ω–æ–≤–∏–≤—Å—è —É —Å–µ—Å—ñ—ó                              | –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ñ `P_LAST_*` –∞–±–æ `NVL()` —É SQL              |
| –ß–∞—Å—Ç–æ –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É—î—Ç—å—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞                             | –ó–∞–π–≤—ñ Refresh —É –∫–æ–∂–Ω—ñ–π DA                                | –∑–∞–ª–∏—à–∏—Ç–∏ –ª–∏—à–µ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π Refresh –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –æ–Ω–æ–≤–ª–µ–Ω—å |

---

üß© **–ö–æ—Ä–æ—Ç–∫–æ:**

> –Ø–∫—â–æ PL/SQL –ø—Ä–æ—Ü–µ—Å –Ω—ñ—á–æ–≥–æ –Ω–µ –æ–±—á–∏—Å–ª—é—î ‚Äî –≤–∏–¥–∞–ª–∏ –π–æ–≥–æ.
> –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω ‚Äî –∑—Ä–æ–±–∏ `Wait for Result = Yes` —ñ Refresh —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è –Ω—å–æ–≥–æ.
> APEX —Å–∞–º –∑–±–µ—Ä—ñ–≥–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è item —É —Å–µ—Å—ñ—é –ø—ñ—Å–ª—è `Change`, —Ç–æ–±—Ç–æ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ `SET_SESSION_STATE` –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ –∑–∞–π–≤—ñ.

---

–•–æ—á–µ—à, —è –¥–æ–ø–æ–º–æ–∂—É –ø–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ —Ç–≤–æ—ó **Dynamic Actions —É —á–∏—Å—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ (–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –ø–æ—Ä—è–¥–∫–æ–º —ñ –∑–∞—Ç—Ä–∏–º–∫–∞–º–∏)** ‚Äî –ø–æ–∫–∞–∂–∏, —è–∫—ñ —Ç—Ä–∏ –ø–æ–¥—ñ—ó –≤ —Ç–µ–±–µ —î –∑–∞—Ä–∞–∑ (–Ω–∞ `P_DATE`, `P_CHECKBOX_DEPARTMENT`, `P_CHECKBOX_UNIT`) —ñ —è –¥–∞–º —Ç–æ—á–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è Builder?
