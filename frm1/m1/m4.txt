–ß—É–¥–æ–≤–æ üëç
–¢–∏ —Ö–æ—á–µ—à —É **–∑–∞–≥–∞–ª—å–Ω–æ–º—É –∑–≤—ñ—Ç—ñ** (–∑–≥—Ä—É–ø–æ–≤–∞–Ω–æ–º—É –ø–æ —Ç–∏–ø–∞—Ö –∫–æ–º–ø–∞–Ω—ñ–π) –≤–Ω–∏–∑—É –æ—Ç—Ä–∏–º–∞—Ç–∏ **–¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ ‚Äú–í—Å—å–æ–≥–æ‚Äù**, —è–∫–∏–π –ø–æ–∫–∞–∂–µ **–∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—É –ø–æ –≤—Å—ñ—Ö –∫–æ–º–ø–∞–Ω—ñ—è—Ö**.
–¢–∞–∫–æ–∂ —Ü–µ–π —Ä—è–¥–æ–∫ –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ **—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π CSS-–∫–ª–∞—Å**, —â–æ–± –≤–∏–¥—ñ–ª–∏—Ç–∏ –π–æ–≥–æ –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —É Interactive Report (IR).

---

## üîπ 1Ô∏è‚É£ –û–Ω–æ–≤–ª–µ–Ω–∏–π SQL —ñ–∑ —Ä—è–¥–∫–æ–º ‚Äú–í—Å—å–æ–≥–æ‚Äù

```sql
WITH base_data AS (
    SELECT 
        ct.name AS company_type_name,      -- –¢–∏–ø –∫–æ–º–ø–∞–Ω—ñ—ó
        c.name  AS company_name,           -- –ù–∞–∑–≤–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è
        SUM(ep.people_count) AS total_people,
        0 AS is_total
    FROM 
        external_personal ep
        JOIN company c ON c.id = ep.company_id
        JOIN company_type ct ON ct.id = c.company_type_id
    WHERE 
        TRUNC(ep.date_create) = TRUNC(:P_REPORT_DATE)
        AND ep.department_id IN (
            SELECT TO_NUMBER(column_value)
            FROM TABLE(apex_string.split(:P_REPORT_DEPARTMENTS, ':'))
        )
        AND ep.date_end IS NULL
    GROUP BY 
        ct.name, c.name
),
total_row AS (
    SELECT 
        '–£—Å—å–æ–≥–æ' AS company_type_name,
        '–í—Å—å–æ–≥–æ' AS company_name,
        SUM(total_people) AS total_people,
        1 AS is_total
    FROM base_data
)
SELECT * 
FROM (
    SELECT * FROM base_data
    UNION ALL
    SELECT * FROM total_row
)
ORDER BY is_total, company_type_name, company_name;
```

---

## üîπ 2Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è

| –ü–æ–ª–µ        | –ó–Ω–∞—á–µ–Ω–Ω—è                                          |
| ----------- | ------------------------------------------------- |
| `base_data` | –æ—Å–Ω–æ–≤–Ω—ñ –∞–≥—Ä–µ–≥–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Å–∏ –ø–æ –∫–æ–º–ø–∞–Ω—ñ—è—Ö            |
| `total_row` | –æ–¥–∏–Ω –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ –∑ —Ç–µ–∫—Å—Ç–æ–º `–í—Å—å–æ–≥–æ`          |
| `is_total`  | 0 ‚Äî –∑–≤–∏—á–∞–π–Ω–∏–π —Ä—è–¥–æ–∫, 1 ‚Äî –ø—ñ–¥—Å—É–º–∫–æ–≤–∏–π (–¥–ª—è —Å—Ç–∏–ª—ñ–≤) |

---

## üîπ 3Ô∏è‚É£ –í–∏–≥–ª—è–¥ —É –∑–≤—ñ—Ç—ñ

```
COMPANY_TYPE_NAME        COMPANY_NAME      TOTAL_PEOPLE
--------------------------------------------------------
–î–µ—Ä–∂–∞–≤–Ω—ñ –∫–æ–º–ø–∞–Ω—ñ—ó        –£–∫—Ä–ø–æ—à—Ç–∞          22
–î–µ—Ä–∂–∞–≤–Ω—ñ –∫–æ–º–ø–∞–Ω—ñ—ó        –£–∫—Ä–∑–∞–ª—ñ–∑–Ω–∏—Ü—è      34
–ü—Ä–∏–≤–∞—Ç–Ω—ñ –∫–æ–º–ø–∞–Ω—ñ—ó        SoftServe         15
–ü—Ä–∏–≤–∞—Ç–Ω—ñ –∫–æ–º–ø–∞–Ω—ñ—ó        –ù–æ–≤–∞ –ø–æ—à—Ç–∞        10
--------------------------------------------------------
–£—Å—å–æ–≥–æ                   –í—Å—å–æ–≥–æ            81  ‚úÖ (–∑–µ–ª–µ–Ω–∏–π —Ä—è–¥–æ–∫)
```

---

## üîπ 4Ô∏è‚É£ –í–∏–¥—ñ–ª–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞ –≤ APEX

1. –î–æ–¥–∞–π **Highlight Rule** —É Interactive Report:

   * **Condition:** `IS_TOTAL = 1`
   * **Style:**

   ```css
   background-color: #d4edda !important;
   color: #155724 !important;
   font-weight: bold;
   border-top: 2px solid #b7e4c7;
   ```

---

## üîπ 5Ô∏è‚É£ –ê–±–æ –∫–∞—Å—Ç–æ–º–Ω–æ —á–µ—Ä–µ–∑ CSS-–∫–ª–∞—Å

### üîß SQL-–≤–∞—Ä—ñ–∞–Ω—Ç —ñ–∑ –≤–ª–∞—Å–Ω–∏–º –∫–ª–∞—Å–æ–º (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à HTML-report):

```sql
SELECT 
    ct.name AS company_type_name,
    c.name  AS company_name,
    SUM(ep.people_count) AS total_people,
    0 AS is_total,
    NULL AS row_class
FROM external_personal ep
JOIN company c ON c.id = ep.company_id
JOIN company_type ct ON ct.id = c.company_type_id
WHERE TRUNC(ep.date_create) = TRUNC(:P_REPORT_DATE)
  AND ep.department_id IN (
      SELECT TO_NUMBER(column_value)
      FROM TABLE(apex_string.split(:P_REPORT_DEPARTMENTS, ':'))
  )
  AND ep.date_end IS NULL
GROUP BY ct.name, c.name

UNION ALL

SELECT 
    '–£—Å—å–æ–≥–æ' AS company_type_name,
    '–í—Å—å–æ–≥–æ' AS company_name,
    SUM(ep.people_count) AS total_people,
    1 AS is_total,
    'row-total' AS row_class
FROM external_personal ep
WHERE TRUNC(ep.date_create) = TRUNC(:P_REPORT_DATE)
  AND ep.department_id IN (
      SELECT TO_NUMBER(column_value)
      FROM TABLE(apex_string.split(:P_REPORT_DEPARTMENTS, ':'))
  )
  AND ep.date_end IS NULL;
```

üëâ –¢–æ–¥—ñ —É **Report Attributes ‚Üí Advanced ‚Üí Custom Attributes** –º–æ–∂–Ω–∞ –ø—Ä–æ–ø–∏—Å–∞—Ç–∏:
`class="#ROW_CLASS#"`

---

## üîπ 6Ô∏è‚É£ CSS –¥–ª—è –∫–ª–∞—Å—É `.row-total`

```css
.row-total td {
  background-color: #d4edda !important;
  color: #155724 !important;
  font-weight: bold;
  border-top: 2px solid #b7e4c7;
}
```

---

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–¢–µ–ø–µ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –ø—ñ–¥—Å—É–º–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ "–í—Å—å–æ–≥–æ" –≤–Ω–∏–∑—É –∑–≤—ñ—Ç—É, –ø—ñ–¥—Å–≤—ñ—á–µ–Ω–∏–π –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—É –∑ —É—Å—ñ—Ö –∫–æ–º–ø–∞–Ω—ñ–π –∑–∞ –≤–∏–±—Ä–∞–Ω—É –¥–∞—Ç—É —Ç–∞ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª–∏.

---

–•–æ—á–µ—à, —â–æ–± —è –ø–æ–∫–∞–∑–∞–≤, —è–∫ –∑—Ä–æ–±–∏—Ç–∏, —â–æ–± —Ü–µ–π ‚Äú–í—Å—å–æ–≥–æ‚Äù **–ø–ª–∞–≤–∞–≤ —É–Ω–∏–∑—É –∑–≤—ñ—Ç—É –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ** (—Ç–æ–±—Ç–æ –∑–∞–≤–∂–¥–∏ –±—É–≤ –≤–∏–¥–∏–º–∏–º, —è–∫ footer)?
