–î–æ–±—Ä–µ üëç
–î–∞–≤–∞–π –∑—Ä–æ–±–∏–º–æ –ø—Ä–æ—Ü–µ—Å **PL/SQL**, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏ **‚Äú–î–æ–¥–∞—Ç–∏‚Äù**.

---

## üîπ 1. –ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, —â–æ —É —Ñ–æ—Ä–º—ñ —î —Ç–∞–∫—ñ item-–∏:

* `:P1_COMPANY_ID` ‚Äì –æ–±—Ä–∞–Ω–∞ –∫–æ–º–ø–∞–Ω—ñ—è (Popup LOV –∑ –≥—Ä—É–ø–∞–º–∏).
* `:P1_UNIT_ID` ‚Äì –æ–±—Ä–∞–Ω–∏–π –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª (Select –∑ UNITS).
* `:P1_WORK_TYPE_ID` ‚Äì –æ–±—Ä–∞–Ω–∏–π —Ç–∏–ø —Ä–æ–±—ñ—Ç (LOV –∑ —Ç–∞–±–ª–∏—Ü—ñ WORK_TYPE).
* `:P1_WORK_TYPE_TEXT` ‚Äì —Ä—É—á–Ω–∏–π –≤–≤—ñ–¥ (Textarea).
* `:P1_PEOPLE_COUNT` ‚Äì –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ (Number).
* `:P0_DEPARTMENT_ID` ‚Äì –ø–æ—Ç–æ—á–Ω–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç (–º–æ–∂–µ –±—É—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π item –∞–±–æ –æ—Ç—Ä–∏–º–∞–Ω–∏–π –ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É).

---

## üîπ 2. –ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ—Ü–µ—Å—É PL/SQL (Processing ‚Üí After Submit ‚Üí Button = ADD)

```plsql
DECLARE
    v_id NUMBER;
BEGIN
    INSERT INTO external_personal (
        department_id,
        unit_id,
        work_type_id,
        work_type_text,
        people_count,
        company_id,
        date_create,
        creator,
        date_end
    )
    VALUES (
        :P0_DEPARTMENT_ID,   -- –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
        :P1_UNIT_ID,         -- –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª
        :P1_WORK_TYPE_ID,    -- LOV
        :P1_WORK_TYPE_TEXT,  -- —Ä—É—á–Ω–∏–π –≤–≤—ñ–¥
        :P1_PEOPLE_COUNT,    -- –∫—ñ–ª—å–∫—ñ—Å—Ç—å
        :P1_COMPANY_ID,      -- –∫–æ–º–ø–∞–Ω—ñ—è
        SYSDATE,             -- —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
        :APP_USER,           -- –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á APEX
        NULL                 -- –∞–∫—Ç–∏–≤–Ω–∏–π –∑–∞–ø–∏—Å
    )
    RETURNING id INTO v_id;

    -- (–æ–ø—Ü—ñ–π–Ω–æ) –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
    APEX_DEBUG.MESSAGE('–ó–∞–ø–∏—Å —Å—Ç–≤–æ—Ä–µ–Ω–æ –∑ ID=' || v_id);
END;
```

---

## üîπ 3. –ü—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏:

* –£ **Processing** ‚Üí –¥–æ–¥–∞–π **"Clear Items"** ‚Üí —â–æ–± –æ—á–∏—Å—Ç–∏—Ç–∏ —Ñ–æ—Ä–º—É.
* –£ **Dynamic Actions** ‚Üí `Refresh` –¥–ª—è **Interactive Report** (—Å–ø—Ä–∞–≤–∞).

---

## üîπ 4. –í–∞–ª—ñ–¥–∞—Ü—ñ—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–¥–∞—Ç–∏):

* `:P1_PEOPLE_COUNT >= 1`.
* `:P1_COMPANY_ID IS NOT NULL`.
* –•–æ—á–∞ –± –æ–¥–Ω–µ –∑ `:P1_WORK_TYPE_ID` –∞–±–æ `:P1_WORK_TYPE_TEXT` –º–∞—î –±—É—Ç–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω–µ.

–¶–µ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ –æ–∫—Ä–µ–º—ñ **Validation ‚Üí PL/SQL Expression**:

```plsql
:P1_WORK_TYPE_ID IS NOT NULL OR :P1_WORK_TYPE_TEXT IS NOT NULL
```

---

üìå –¢–∞–∫–∏–º —á–∏–Ω–æ–º –∫–Ω–æ–ø–∫–∞ **‚Äú–î–æ–¥–∞—Ç–∏‚Äù** –±—É–¥–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Å —É `EXTERNAL_PERSONAL`, –∞ –∑–≤—ñ—Ç —Å–ø—Ä–∞–≤–∞ –º–∏—Ç—Ç—î–≤–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è.

---

–•–æ—á–µ—à, —è —â–µ –ø—ñ–¥–≥–æ—Ç—É—é SQL –¥–ª—è **Interactive Report** (–ø—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞), —è–∫–∏–π –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏–º–µ –Ω–∞–∑–≤–∏ –∫–æ–º–ø–∞–Ω—ñ–π, —Ç–∏–ø—ñ–≤ —Ä–æ–±—ñ—Ç —ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —ó—Ö–Ω—ñ—Ö ID?
