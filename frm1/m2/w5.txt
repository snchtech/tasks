–î—É–∂–µ –≥–∞—Ä–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è üí™
–¢–∏ —Ö–æ—á–µ—à –∑—Ä–æ–±–∏—Ç–∏ **—Ä–æ–∑—É–º–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–≤—ñ—Ç—ñ–≤** —É Oracle APEX:

1Ô∏è‚É£ –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ **–∫–Ω–æ–ø–∫—É ‚Äú–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–≤—ñ—Ç‚Äù** —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–∞ –æ–±—Ä–∞–Ω—É –¥–∞—Ç—É —î –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ `EXTERNAL_PERSONAL`.
2Ô∏è‚É£ –í—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ **–∑–≤—ñ—Ç–∏** –ª–∏—à–µ —è–∫—â–æ —î –¥–∞–Ω—ñ,
–∞ —è–∫—â–æ –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î ‚Äî –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∏–ø—É:

> ‚Äú–ó–∞–ø–∏—Å—ñ–≤ –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –¥–∞—Ç—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.‚Äù

---

## üîπ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è

–ú–∏ –º–æ–∂–µ–º–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ —á–µ—Ä–µ–∑:

* **Condition** (–¥–ª—è –∫–Ω–æ–ø–∫–∏);
* **Dynamic Action + SQL check** (–¥–ª—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –ø–æ–∫–∞–∑—É/–ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤ —ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è).

---

## üîπ 1Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∑–∞–ø–∏—Å—ñ–≤ —É `EXTERNAL_PERSONAL`

–ë–∞–∑–æ–≤–∏–π SQL –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

```sql
SELECT COUNT(*) AS cnt
FROM external_personal ep
WHERE TRUNC(ep.date_create) = TRUNC(:P_DATE)
  AND ep.date_end IS NULL;
```

---

## üîπ 2Ô∏è‚É£ –£–º–æ–≤–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–≤—ñ—Ç"

–í—ñ–¥–∫—Ä–∏–π **Button ‚Üí Server-side Condition**
—ñ –≤—Å—Ç–∞–Ω–æ–≤–∏:

* **Type:** SQL Query (returning at least one row)
* **SQL Query:**

```sql
SELECT 1
FROM external_personal ep
WHERE TRUNC(ep.date_create) = TRUNC(:P_DATE)
  AND ep.date_end IS NULL
FETCH FIRST 1 ROWS ONLY;
```

> üîπ –Ø–∫—â–æ —î —Ö–æ—á–∞ –± –æ–¥–∏–Ω –∑–∞–ø–∏—Å ‚Äî –∫–Ω–æ–ø–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è, —ñ–Ω–∞–∫—à–µ —Ö–æ–≤–∞—î—Ç—å—Å—è.

---

## üîπ 3Ô∏è‚É£ –£–º–æ–≤–∞ –¥–ª—è –∑–≤—ñ—Ç—ñ–≤ (—á–µ—Ä–µ–∑ Server-side Condition)

–Ø–∫—â–æ –∑–≤—ñ—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω—ñ (—Ä–µ–≥—ñ–æ–Ω–∏ Interactive Report / Classic Report),
–º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ç—É –∂ —É–º–æ–≤—É:

* **Region ‚Üí Server-side Condition ‚Üí SQL Query (returning at least one row)**

```sql
SELECT 1
FROM external_personal ep
WHERE TRUNC(ep.date_create) = TRUNC(:P_DATE)
  AND ep.date_end IS NULL
FETCH FIRST 1 ROWS ONLY;
```

‚úÖ
–¢–æ–¥—ñ –∑–≤—ñ—Ç –±—É–¥–µ –∑‚Äô—è–≤–ª—è—Ç–∏—Å—å —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –¥–∞–Ω—ñ –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –¥–∞—Ç—É.

---

## üîπ 4Ô∏è‚É£ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äú–ó–∞–ø–∏—Å—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ‚Äù

–°—Ç–≤–æ—Ä–∏ **HTML Region** –ø—ñ–¥ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ (–∞–±–æ –∑–∞–º—ñ—Å—Ç—å –∑–≤—ñ—Ç—É):

* –ù–∞–∑–≤–∞: `No Data Message`
* **Static ID:** `noDataMessage`
* **Source:**

```html
<div style="padding:1rem; background-color:#fff3cd; border:1px solid #ffeeba; border-radius:4px; color:#856404; font-weight:500;">
  –ó–∞–ø–∏—Å—ñ–≤ –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –¥–∞—Ç—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.
</div>
```

* **Server-side Condition:** *Never* (–ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).

---

## üîπ 5Ô∏è‚É£ Dynamic Action (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –¥–∞—Ç–∏)

### –ü–æ–¥—ñ—è:

* **Event:** Change
* **Selection Type:** Item(s)
* **Item:** `P_DATE`

---

### True Action ‚Üí Execute PL/SQL Code

**Code:**

```plsql
DECLARE
    v_cnt NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_cnt
    FROM external_personal ep
    WHERE TRUNC(ep.date_create) = TRUNC(:P_DATE)
      AND ep.date_end IS NULL;

    :P_HAS_DATA := CASE WHEN v_cnt > 0 THEN 1 ELSE 0 END;
END;
```

> üîπ –°—Ç–≤–æ—Ä–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π item `P_HAS_DATA` (Number) ‚Äî –≤—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (1 –∞–±–æ 0).

---

### True Action 2 ‚Üí Execute JavaScript Code

```js
if ($v("P_HAS_DATA") == "1") {
  // –Ñ –¥–∞–Ω—ñ ‚Üí –ø–æ–∫–∞–∑—É—î–º–æ –∑–≤—ñ—Ç–∏ —ñ –∫–Ω–æ–ø–∫—É, —Ö–æ–≤–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  $("#noDataMessage").hide();
  apex.region("report_main").show();
  apex.region("report_units").show();
  apex.region("report_details").show();
  $("#downloadButton").show();
} else {
  // –î–∞–Ω–∏—Ö –Ω–µ–º–∞—î ‚Üí —Ö–æ–≤–∞—î–º–æ –∑–≤—ñ—Ç–∏, –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  $("#noDataMessage").show();
  apex.region("report_main").hide();
  apex.region("report_units").hide();
  apex.region("report_details").hide();
  $("#downloadButton").hide();
}
```

> üîπ –ó–∞–º—ñ–Ω–∏—Ç–∏ `report_main`, `report_units`, `report_details` –Ω–∞ **Static ID** —Ç–≤–æ—ó—Ö –∑–≤—ñ—Ç—ñ–≤.
> üîπ –ó–∞–º—ñ–Ω–∏—Ç–∏ `downloadButton` –Ω–∞ Static ID –∫–Ω–æ–ø–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

---

## üîπ 6Ô∏è‚É£ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏

–°—Ç–≤–æ—Ä–∏ Dynamic Action **After Page Load** –∑ —Ç–∞–∫–∏–º —Å–∞–º–∏–º –∫–æ–¥–æ–º PL/SQL —ñ JavaScript,
—â–æ–± —Å—Ç–∞–Ω –∫–Ω–æ–ø–∫–∏/–∑–≤—ñ—Ç—ñ–≤ –≤–∏–∑–Ω–∞—á–∞–≤—Å—è –æ–¥—Ä–∞–∑—É –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

---

## üîπ üîç –†–µ–∑—É–ª—å—Ç–∞—Ç

| –°–∏—Ç—É–∞—Ü—ñ—è                                   | –ü–æ–≤–µ–¥—ñ–Ω–∫–∞                                                                                         |
| ------------------------------------------ | ------------------------------------------------------------------------------------------------- |
| –Ñ –∑–∞–ø–∏—Å–∏ —É `EXTERNAL_PERSONAL` –∑–∞ `P_DATE` | ‚úÖ –ó–≤—ñ—Ç–∏ + –∫–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏‚Äù –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è                                                     |
| –ù–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤                              | ‚ö†Ô∏è –•–æ–≤–∞—é—Ç—å—Å—è –≤—Å—ñ –∑–≤—ñ—Ç–∏ —ñ –∫–Ω–æ–ø–∫–∞, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: ‚Äú–ó–∞–ø–∏—Å—ñ–≤ –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –¥–∞—Ç—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.‚Äù |

---

‚úÖ **–ü—ñ–¥—Å—É–º–æ–∫:**

* –£—Å–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `P_DATE` –∞–±–æ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.
* –õ–æ–≥—ñ–∫–∞ –≤–∏–Ω–µ—Å–µ–Ω–∞ —É PL/SQL –ø–µ—Ä–µ–≤—ñ—Ä–∫—É + JS –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
* –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏, –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∫–ª—ñ–∫—É.

---

–•–æ—á–µ—à, —â–æ–± —è –∑–≥–µ–Ω–µ—Ä—É–≤–∞–≤ –≥–æ—Ç–æ–≤–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç **Dynamic Action –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º** (—ñ–∑ –Ω–∞–∑–≤–∞–º–∏ –¥—ñ–π —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ —Ä–µ–≥—ñ–æ–Ω–∏ —ñ –∫–Ω–æ–ø–∫—É), —è–∫–∏–π —Ç–∏ –º–æ–∂–µ—à –ø—Ä–æ—Å—Ç–æ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –≤ APEX Builder?
