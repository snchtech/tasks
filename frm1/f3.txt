–î–æ–±—Ä–µ üëç
–î–∞–≤–∞–π –ø–æ –∫—Ä–æ–∫–∞—Ö —Å–ø—Ä–æ—î–∫—Ç—É—î–º–æ **—Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ `EXTERNAL_PERSONAL`** –≤ Oracle APEX, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ —Ç–≤–æ—ó —É–º–æ–≤–∏.

---

## üîπ 1. –ü–æ–ø–ª–æ–≤ list —ñ–∑ —Ç–∞–±–ª–∏—Ü—ñ COMPANY (–≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ COMPANY_TYPE)

–¢—É—Ç –Ω–∞–π–∑—Ä—É—á–Ω—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **LOV –∑ –≥—Ä—É–ø–∞–º–∏**.
–£ APEX —Ü–µ —Ä–æ–±–∏—Ç—å—Å—è SQL-–∑–∞–ø–∏—Ç–æ–º —ñ–∑ `COMPANY_TYPE.NAME` —è–∫ –≥—Ä—É–ø–æ–≤–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º.

```sql
SELECT c.name AS display_value,
       c.id   AS return_value,
       ct.name AS group_label,
       ct.id   AS group_order
FROM   company c
JOIN   company_type ct ON ct.id = c.company_type_id
WHERE  c.date_end IS NULL
ORDER BY ct.id, c.name
```

üëâ –ü–æ—è—Å–Ω–µ–Ω–Ω—è:

* `group_label` ‚Üí –≤ APEX LOV –ø–æ–∫–∞–∑—É—î **–∑–∞–≥–æ–ª–æ–≤–∫–∏ –≥—Ä—É–ø**.
* `group_order` ‚Üí –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ —É `ORDER BY`, —â–æ–± –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≥—Ä—É–ø.
* `c.name` ‚Üí –Ω–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó —É –≤–∏–ø–∞–¥–∞—é—á–æ–º—É —Å–ø–∏—Å–∫—É.

–£ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è—Ö LOV:

* **Display Extra Values** = No
* **Display Null Value** = Yes (–¥–ª—è "‚Äî –≤–∏–±–µ—Ä—ñ—Ç—å –∫–æ–º–ø–∞–Ω—ñ—é ‚Äî").
* **Display Group** = Yes (—Ç–æ–¥—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ `COMPANY_TYPE` –±—É–¥—É—Ç—å –≤–∏–¥–∏–º—ñ).

---

## üîπ 2. Select item UNIT (—Ç–∞–±–ª–∏—Ü—è `UNITS`)

–ü—Ä–æ—Å—Ç–∏–π LOV:

```sql
SELECT name AS display_value,
       id   AS return_value
FROM   units
WHERE  date_end IS NULL
ORDER BY name
```

---

## üîπ 3. Poplov list WORK_TYPE (—Ñ—ñ–ª—å—Ç—Ä –ø–æ department_id)

–¢—É—Ç —Ç—Ä–µ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **—Å–µ—Å—ñ–π–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** –∞–±–æ item –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ `DEPARTMENT_ID`.
–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, —â–æ —Ü–µ `:P0_DEPARTMENT_ID`.

```sql
SELECT name AS display_value,
       id   AS return_value
FROM   work_type
WHERE  department_id = :P0_DEPARTMENT_ID
  AND  date_end IS NULL
ORDER BY name
```

---

## üîπ 4. Textarea + Select —É —Å–ø—ñ–ª—å–Ω–æ–º—É —Ä–µ–≥—ñ–æ–Ω—ñ (—Ñ–æ–Ω –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è)

–£ —Ñ–æ—Ä–º—ñ —Å—Ç–≤–æ—Ä—é—î–º–æ —Ä–µ–≥—ñ–æ–Ω **"Work Type (–≤–∞—Ä—ñ–∞–Ω—Ç)"**.
–í—Å–µ—Ä–µ–¥–∏–Ω—ñ:

* `P1_WORK_TYPE_ID` (select LOV –∑ —Ç–∞–±–ª–∏—Ü—ñ `WORK_TYPE`).
* `P1_WORK_TYPE_TEXT` (textarea).

üëâ –î–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó:
–£ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è—Ö —Ä–µ–≥—ñ–æ–Ω—É ‚Üí **CSS Classes** = `work-type-block`.

–î–æ–¥–∞—Ç–∏ CSS —É —Å—Ç–æ—Ä—ñ–Ω–∫—É:

```css
.work-type-block {
  background-color: #f5f5f5;   /* —Å–≤—ñ—Ç–ª–æ-—Å—ñ—Ä–∏–π —Ñ–æ–Ω */
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 15px;
}
```

---

## üîπ 5. Number item PEOPLE_COUNT

Item: `P1_PEOPLE_COUNT`
Validation: must be `>= 1`.

---

## üîπ 6. –ö–Ω–æ–ø–∫–∞ "–î–æ–¥–∞—Ç–∏ –≤ –∑–≤—ñ—Ç"

–ö–Ω–æ–ø–∫–∞: **"–î–æ–¥–∞—Ç–∏"** (`CREATE`).
Process: **PL/SQL insert**:

```plsql
INSERT INTO external_personal (
    department_id,
    unit_id,
    work_type_id,
    work_type_text,
    people_count,
    company_id,
    date_create,
    creator,
    date_end
)
VALUES (
    :P0_DEPARTMENT_ID,
    :P1_UNIT_ID,
    :P1_WORK_TYPE_ID,
    :P1_WORK_TYPE_TEXT,
    :P1_PEOPLE_COUNT,
    :P1_COMPANY_ID,
    SYSDATE,
    :APP_USER,
    NULL
);
```

üëâ –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:

* **Refresh IR Report** (right pane).
* –û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª—è (`Clear Items`).

---

## üîπ 7. –ú–∞–∫–µ—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏

```
--------------------------------------------------------
| Sidebar (–∑–ª—ñ–≤–∞)             |  IR Report (—Å–ø—Ä–∞–≤–∞)   |
|------------------------------|-----------------------|
| [Company poplov list]        |                       |
| [Unit select]                |                       |
|------------------------------|                       |
|   [ WorkType select ]        |                       |
|   [ WorkType textarea ]      |                       |
|   (—Ñ–æ–Ω-—Å—ñ—Ä–∞ –ø–∞–Ω–µ–ª—å)          |                       |
|------------------------------|                       |
| [Number count_people]        |                       |
| [Button –î–æ–¥–∞—Ç–∏]              |                       |
--------------------------------------------------------
```

---

üìå –¢–∞–∫–∏–º —á–∏–Ω–æ–º —É —Ç–µ–±–µ –±—É–¥–µ **—Ñ–æ—Ä–º–∞ –∑–ª—ñ–≤–∞** (Sidebar region, Fixed to Left), –∞ **Interactive Report —Å–ø—Ä–∞–≤–∞**.

---

–•–æ—á–µ—à, —è –æ–¥—Ä–∞–∑—É –ø—ñ–¥–≥–æ—Ç—É—é SQL –¥–ª—è **LOV-–∑–∞–ø–∏—Ç—ñ–≤ –∑ –≥—Ä—É–ø–∞–º–∏ (company_type)** —ñ –ø—Ä–∏–∫–ª–∞–¥ **APEX region layout (Sidebar + Report)** —É –≥–æ—Ç–æ–≤–æ–º—É –≤–∏–≥–ª—è–¥—ñ –¥–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É?
