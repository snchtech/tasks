–î—É–∂–µ –¥–æ–±—Ä–µ, —â–æ —Ç–∏ —Ü–µ –ø—ñ–¥—Å–≤—ñ—Ç–∏–≤ ‚Äî –ø–∏—Ç–∞–Ω–Ω—è **–∞–±—Å–æ–ª—é—Ç–Ω–æ –ø–æ —Å—É—Ç—ñ**, —ñ —Ç—É—Ç —Å–ø—Ä–∞–≤–¥—ñ —î –º–æ–º–µ–Ω—Ç, —è–∫–∏–π –ª–µ–≥–∫–æ —Å–ø—Ä–∏–π–Ω—è—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ üëç
–ó–∞—Ä–∞–∑ –ø–æ—è—Å–Ω—é **—Å–ø–æ–∫—ñ–π–Ω–æ, –ø–æ –∫—Ä–æ–∫–∞—Ö**, –±–µ–∑ ¬´—Å—Ç—Ä–∏–±–∫—ñ–≤ –ª–æ–≥—ñ–∫–∏¬ª.

---

## üî¥ –ö–õ–Æ–ß–û–í–ï: —á–æ–º—É —Ç–∏ ‚Äú–Ω–µ –±–∞—á–∏—à‚Äù `–†–æ–∑–≥–ª—è–¥–∞—î`

–¢–æ–º—É —â–æ –≤ **–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ–º—É –≤–∞—Ä—ñ–∞–Ω—Ç—ñ**:

> üîπ **–ª–æ–≥—ñ–∫–∞ ‚Äú—á–∏ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É‚Äù
> üîπ —ñ –ª–æ–≥—ñ–∫–∞ ‚Äú—è–∫–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏‚Äù
> ‚ûú –†–û–ó–í–ï–î–ï–ù–Ü –í –†–Ü–ó–ù–Ü –ú–Ü–°–¶–Ø**

–£ —Å—Ç–∞—Ä–æ–º—É –∫–æ–¥—ñ **‚Äú–†–æ–∑–≥–ª—è–¥–∞—î‚Äù –≥–µ–Ω–µ—Ä—É–≤–∞–≤—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª–æ–≥—ñ–∫–∏ –∫–Ω–æ–ø–∫–∏**, —â–æ –π –±—É–ª–æ –∫–æ—Ä–µ–Ω–µ–º –ø—Ä–æ–±–ª–µ–º.

---

## üß† –©–æ –±—É–ª–æ —Ä–∞–Ω—ñ—à–µ (—ñ —á–æ–º—É —Ü–µ –ª–∞–º–∞–ª–æ—Å—å)

–£ —Ç–µ–±–µ —Ä–∞–Ω—ñ—à–µ:

```plsql
elsif (not l_is_role) and l_count_cb = 0 then
   l_show_button := false;
   l_count_cb:= l_count_cb + 1;
   append(p_buf, '–†–æ–∑–≥–ª—è–¥–∞—î');
```

‚ùå –¢–æ–±—Ç–æ:

* —Å—Ç–∞—Ç—É—Å **–∑–∞–ª–µ–∂–∞–≤ –≤—ñ–¥ —Ä–æ–ª—ñ**
* —Å—Ç–∞—Ç—É—Å **–∑–∞–ª–µ–∂–∞–≤ –≤—ñ–¥ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞**
* —Å—Ç–∞—Ç—É—Å **–∂–∏–≤ —É –±–ª–æ—Ü—ñ –∫–Ω–æ–ø–∫–∏**

–ß–µ—Ä–µ–∑ —Ü–µ:

* –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –µ—Ç–∞–ø—ñ –≤—ñ–Ω ‚Äú–≥—É–±–∏–≤—Å—è‚Äù
* –≤ –¥–µ—è–∫–∏—Ö –∫–µ–π—Å–∞—Ö –∑‚Äô—è–≤–ª—è–≤—Å—è –Ω–µ —Ç–∞–º

---

## ‚úÖ –ù–û–í–ê –ª–æ–≥—ñ–∫–∞ (—ñ —á–æ–º—É –≤–æ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞)

### üîπ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π —à–º–∞—Ç–æ–∫, —è–∫–∏–π —Ç–∏ —Ü–∏—Ç—É—î—à, **–†–û–ë–ò–¢–¨ –¢–Ü–õ–¨–ö–ò –û–î–ù–ï**

> üëâ **–≤–∏–∑–Ω–∞—á–∞—î, —á–∏ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ö–ù–û–ü–ö–£ –ü–Ü–î–ü–ò–°–£**

```plsql
-- –ß–∏ –ø–æ–∫–∞–∑—É—î–º–æ –∫–Ω–æ–ø–∫—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É
IF NOT p_is_active_stage THEN
   l_show_button := FALSE;

ELSIF l_parallel THEN
   l_show_button := l_is_role;

ELSE
   l_show_button := l_is_role AND l_is_first_active_row;
END IF;
```

‚ùó **–¢–£–¢ –ù–Ü–ö–û–õ–ò –Ü –ù–ï –ú–ê–Ñ –ë–£–¢–ò `–†–æ–∑–≥–ª—è–¥–∞—î`**

---

## üß© –î–ï –¢–ï–ü–ï–† –§–û–†–ú–£–Ñ–¢–¨–°–Ø `–†–æ–∑–≥–ª—è–¥–∞—î`

### üëâ –û–ö–†–ï–ú–ò–ô –±–ª–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤

(–≤—ñ–Ω –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è, **–∫–æ–ª–∏ –∫–Ω–æ–ø–∫–∞ –ù–ï –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è**)

```plsql
IF l_show_button THEN
   -- —Ç—É—Ç —Ç—ñ–ª—å–∫–∏ –∫–Ω–æ–ø–∫–∞
   append(p_buf,
     '<button class="confirm-signature-button" ...>...</button>'
   );

ELSE
   -- üëá –û–¶–ï –Ü –Ñ –ú–Ü–°–¶–ï –î–õ–Ø –°–¢–ê–¢–£–°–Ü–í
   IF NOT p_is_active_stage THEN
      append(p_buf,
        '<span class="wait-confirm-signature-text">
           –û—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –µ—Ç–∞–ø—ñ–≤
         </span>'
      );

   ELSIF NOT l_parallel
      AND l_is_first_active_row
   THEN
      append(p_buf,
        '<span class="wait-confirm-signature-text wait-confirm-signature-text-current">
           –†–æ–∑–≥–ª—è–¥–∞—î
         </span>'
      );

   ELSE
      append(p_buf,
        '<span class="wait-confirm-signature-text">
           –û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏
         </span>'
      );
   END IF;
END IF;
```

---

## üß† –¢–µ–ø–µ—Ä ‚Äî –ª–æ–≥—ñ–∫–∞ –ø–æ-–ª—é–¥—Å—å–∫–∏

### ‚úî –ö–æ–ª–∏ –±—É–¥–µ `–†–æ–∑–≥–ª—è–¥–∞—î`

| –£–º–æ–≤–∞                 | –†–µ–∑—É–ª—å—Ç–∞—Ç |
| --------------------- | --------- |
| –ê–∫—Ç–∏–≤–Ω–∏–π –µ—Ç–∞–ø         | ‚úî         |
| –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π           | ‚úî         |
| –ü–µ—Ä—à–∏–π —Ä—è–¥–æ–∫ –µ—Ç–∞–ø—É    | ‚úî         |
| –ö–Ω–æ–ø–∫–∞ –ù–ï –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è | ‚úî         |

‚û° **—Ä—ñ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –µ—Ç–∞–ø**

---

### ‚ùå –ö–æ–ª–∏ –ù–ï –±—É–¥–µ `–†–æ–∑–≥–ª—è–¥–∞—î`

| –°–∏—Ç—É–∞—Ü—ñ—è              | –ß–æ–º—É                   |
| --------------------- | ---------------------- |
| –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –µ—Ç–∞–ø      | —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| –î—Ä—É–≥–∏–π / —Ç—Ä–µ—Ç—ñ–π —Ä—è–¥–æ–∫ | –Ω–µ –ø–µ—Ä—à–∏–π              |
| –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π –µ—Ç–∞–ø       | —â–µ –Ω–µ —á–∞—Å              |
| –Ñ –∫–Ω–æ–ø–∫–∞              | –∫–Ω–æ–ø–∫–∞ –∑–∞–º—ñ–Ω—é—î —Å—Ç–∞—Ç—É—Å  |

---

## üîé –ß–∏ –±—É–¥–µ —Ü–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ?

üëâ **–¢–∞–∫, —ñ —Å–∞–º–µ —Ç–æ–º—É**, —â–æ:

* `l_is_first_active_row` —Å—Ç–∞–≤–∏—Ç—å—Å—è **1 —Ä–∞–∑ –Ω–∞ –µ—Ç–∞–ø**
* —Å—Ç–∞—Ç—É—Å –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä–æ–ª–µ–π
* –∫–Ω–æ–ø–∫–∞ —ñ —Å—Ç–∞—Ç—É—Å –Ω–µ –∑–∞–≤–∞–∂–∞—é—Ç—å –æ–¥–Ω–µ –æ–¥–Ω–æ–º—É
* –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –µ—Ç–∞–ø–∏ –Ω–µ –æ—Ç—Ä–∏–º—É—é—Ç—å ‚Äú–†–æ–∑–≥–ª—è–¥–∞—î‚Äù

---

## üß™ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π mental-—Ç–µ—Å—Ç

### –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –µ—Ç–∞–ø, 3 —Ä—è–¥–∫–∏

```
[–†–æ–∑–≥–ª—è–¥–∞—î]
[–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏]
[–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏]
```

### –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –µ—Ç–∞–ø

```
[–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏]
[–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏]
[–û—á—ñ–∫—É—î –≤—ñ–¥–º—ñ—Ç–∫–∏]
```

### –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π –µ—Ç–∞–ø

```
[–û—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –µ—Ç–∞–ø—ñ–≤]
```

---

## üìå –ö–æ—Ä–æ—Ç–∫–æ (–∫–ª—é—á–æ–≤–∞ –¥—É–º–∫–∞)

> **–¢–∏ –Ω–µ ‚Äú–≤—Ç—Ä–∞—Ç–∏–≤‚Äù `–†–æ–∑–≥–ª—è–¥–∞—î` ‚Äî
> —Ç–∏ –ø—Ä–æ—Å—Ç–æ –≤–∏–Ω—ñ—Å –π–æ–≥–æ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–µ.**

–¶–µ —Å–∞–º–µ —Ç–∞ –ø—Ä–∞–≤–∫–∞, —è–∫–∞ **–ø—Ä–∏–±–∏—Ä–∞—î —Ö–∞–æ—Å, –∞–ª–µ –Ω–µ –ª–∞–º–∞—î —Ç–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É**.

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É:

* –ø–æ–∫–∞–∑–∞—Ç–∏ **–¥–∏—Ñ –ø—Ä—è–º–æ –ø–æ —Ç–≤–æ—î–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É**
* –∞–±–æ –¥–∞—Ç–∏ **–≤–µ—Ä—Å—ñ—é ‚Äú–æ–¥–Ω–∏–º –æ–∫–æ–º‚Äù –¥–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏**

–ö–∞–∂–∏ üëå
