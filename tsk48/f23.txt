–ß—É–¥–æ–≤–æ, —Ü–µ **–æ—Å—Ç–∞–Ω–Ω—ñ–π ‚Äú–¥–æ—Ä–æ—Å–ª–∏–π‚Äù —Ä—ñ–≤–µ–Ω—å** —Ü—ñ—î—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ üí™
–ü–æ–∫–∞–∂—É **—è–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ multiple dialogs** (–∫—ñ–ª—å–∫–∞ –¥—ñ–∞–ª–æ–≥—ñ–≤ –ø—ñ–¥—Ä—è–¥ / –≤–∫–ª–∞–¥–µ–Ω—ñ / —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏) **–±–µ–∑ –∫–æ–ª—ñ–∑—ñ–π** —ñ –±–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ DOM.

---

# üéØ –ü—Ä–æ–±–ª–µ–º–∞ multiple dialogs (—â–æ –º–æ–∂–µ –ø—ñ—Ç–∏ –Ω–µ —Ç–∞–∫)

–£—è–≤–∏ —Å—Ü–µ–Ω–∞—Ä—ñ–π:

1. Dialog A ‚Üí Save
2. –í—ñ–¥–∫—Ä–∏–≤—Å—è Dialog B ‚Üí Cancel
3. –ü–æ—Ç—ñ–º Dialog C ‚Üí Save

–Ø–∫—â–æ —Ç—Ä–∏–º–∞—Ç–∏ –ª–∏—à–µ **–æ–¥–∏–Ω —Ä—è–¥–æ–∫** (`P0_DIALOG_RESULT`), –≤–∏–Ω–∏–∫–∞—é—Ç—å —Ä–∏–∑–∏–∫–∏:

* —Å—Ç–∞—Ä–µ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äú–ø—Ä–æ—Ç—ñ–∫–∞—î‚Äù
* –≤–∞–∂–∫–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, **—è–∫–∏–π —Å–∞–º–µ dialog** –∑–∞–∫—Ä–∏–≤—Å—è
* —Å–∫–ª–∞–¥–Ω–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏

–¢–æ–º—É –≤–≤–æ–¥–∏–º–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç**.

---

# üß† –ü–†–ê–í–ò–õ–¨–ù–ê –ú–û–î–ï–õ–¨: `dialogId + result`

–ú–∏ –ø–µ—Ä–µ–¥–∞—î–º–æ **–Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**, –∞ **–ø–æ–¥—ñ—é**:

```json
{
  dialog: "SIGN_BY",
  result: "DONE"
}
```

---

# 1Ô∏è‚É£ Global Page ‚Äî –Ω–æ–≤–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç item

## Page 0 ‚Üí Items

### üîπ –ó–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ ‚Äî JSON

| Item                | –¢–∏–ø    |
| ------------------- | ------ |
| `P0_DIALOG_PAYLOAD` | Hidden |

---

# 2Ô∏è‚É£ –ó–∞–∫—Ä–∏—Ç—Ç—è dialog (—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ)

## ‚úÖ JS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### Global helper (Page 0 ‚Üí Execute on Page Load)

```js
(function () {
  window.AppDialog = {
    close: function (dialogId, result) {
      const payload = {
        dialog: dialogId,
        result: result,
        ts: Date.now()
      };

      apex.item('P0_DIALOG_PAYLOAD')
        .setValue(JSON.stringify(payload));

      apex.navigation.closeDialog();
    }
  };
})();
```

### –£ –±—É–¥—å-—è–∫–æ–º—É dialog page

```js
AppDialog.close('SIGN_BY', 'DONE');
```

–∞–±–æ

```js
AppDialog.close('EDIT_TASK', 'UPDATED');
```

---

## ‚úÖ PL/SQL (—è–∫—â–æ —Ç—Ä–µ–±–∞)

```plsql
apex_util.set_session_state(
  'P0_DIALOG_PAYLOAD',
  json_object(
    'dialog' value 'SIGN_BY',
    'result' value 'DONE',
    'ts'     value systimestamp
  )
);

apex_navigation.close_dialog;
```

---

# 3Ô∏è‚É£ Global Page ‚Äî —î–¥–∏–Ω–∏–π dispatcher (READY)

## Dynamic Action: `DA_DIALOG_PAYLOAD_DISPATCHER`

**Event**: `Dialog Closed`
**Selection**: Page

### Client-side Condition

```js
!!$v('P0_DIALOG_PAYLOAD')
```

---

### True Action ‚Üí Execute JS

```js
(function () {
  const raw = $v('P0_DIALOG_PAYLOAD');
  apex.item('P0_DIALOG_PAYLOAD').setValue(null);

  let payload;
  try {
    payload = JSON.parse(raw);
  } catch (e) {
    console.error('Invalid dialog payload', raw);
    return;
  }

  // 1Ô∏è‚É£ –≥–ª–æ–±–∞–ª—å–Ω–∞ –ø–æ–¥—ñ—è
  apex.event.trigger(document, 'apex-dialog-result', payload);

  // 2Ô∏è‚É£ –ø–æ–¥—ñ—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ dialog
  apex.event.trigger(
    document,
    `apex-dialog-${payload.dialog}`,
    payload
  );
})();
```

---

# 4Ô∏è‚É£ –Ø–∫ –ª–æ–≤–∏—Ç–∏ multiple dialogs (—Ä—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ)

## üîπ –í–ê–†–Ü–ê–ù–¢ A ‚Äî —Å–ª—É—Ö–∞—Ç–∏ –í–°–ï

```js
document.addEventListener('apex-dialog-result', function (e) {
  console.log('Any dialog:', e.detail.dialog, e.detail.result);
});
```

---

## üîπ –í–ê–†–Ü–ê–ù–¢ B ‚Äî —Å–ª—É—Ö–∞—Ç–∏ –ö–û–ù–ö–†–ï–¢–ù–ò–ô dialog

### Page 5

```js
document.addEventListener('apex-dialog-SIGN_BY', function (e) {
  if (e.detail.result === 'DONE') {
    apex.region('MARKS_REGION').refresh();
  }
});
```

### –Ü–Ω—à–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞

```js
document.addEventListener('apex-dialog-EDIT_TASK', function (e) {
  apex.region('TASKS_IR').refresh();
});
```

‚úî –±–µ–∑ `switch`
‚úî –±–µ–∑ if-else
‚úî –±–µ–∑ —Ö–∞–æ—Å—É

---

# 5Ô∏è‚É£ –Ø–∫ –ø–æ–≤–æ–¥–∏—Ç—å—Å—è Cancel / X / ESC

| –î—ñ—è       | Payload |
| --------- | ------- |
| Save / OK | ‚úÖ —î     |
| Cancel    | ‚ùå –Ω–µ–º–∞—î |
| X         | ‚ùå –Ω–µ–º–∞—î |
| ESC       | ‚ùå –Ω–µ–º–∞—î |

üëâ Dispatcher **–Ω–µ —Å—Ç—Ä—ñ–ª—è—î**
üëâ –ù—ñ—è–∫–∏—Ö fake-result‚Äô—ñ–≤
üëâ –ß–∏—Å—Ç–∞ –ª–æ–≥—ñ–∫–∞

(–Ø–∫—â–æ —Ç—Ä–µ–±–∞ ‚Äî –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ `apex-dialog-cancelled` –æ–∫—Ä–µ–º–æ)

---

# 6Ô∏è‚É£ –ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—ñ—î—ó –º–æ–¥–µ–ª—ñ

‚úÖ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ **–±—É–¥—å-—è–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ dialog-—ñ–≤**
‚úÖ –≤–∫–ª–∞–¥–µ–Ω—ñ / –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ / –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ
‚úÖ –Ω—ñ—è–∫–∏—Ö race-condition
‚úÖ –ª–µ–≥–∫–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚úÖ –ª–µ–≥–∫–æ –¥–µ–±–∞–∂–∏—Ç–∏
‚úÖ –ª–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ (`payload.extra`)

---

# 7Ô∏è‚É£ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

–£ Console:

```js
document.addEventListener('apex-dialog-result', e =>
  console.log('DIALOG EVENT:', e.detail)
);
```

–ó–∞–∫—Ä–∏–π –∫—ñ–ª—å–∫–∞ —Ä—ñ–∑–Ω–∏—Ö dialog-—ñ–≤ ‚Üí –ø–æ–±–∞—á–∏—à —Ä—ñ–∑–Ω—ñ payload‚Äô–∏.

---

# 8Ô∏è‚É£ –§—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (–∫–æ—Ä–æ—Ç–∫–æ)

**–£ dialog page**

```js
AppDialog.close('DIALOG_ID', 'RESULT');
```

**Global Page**

* –æ–¥–∏–Ω DA
* –æ–¥–∏–Ω dispatcher
* zero DOM

**–°—Ç–æ—Ä—ñ–Ω–∫–∏**

* —Å–ª—É—Ö–∞—é—Ç—å —Ç–µ, —â–æ —ó–º –ø–æ—Ç—Ä—ñ–±–Ω–æ

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –Ω–∞—Å—Ç—É–ø–Ω—ñ –∞–ø–≥—Ä–µ–π–¥–∏:

* üß† `AppDialog.on('SIGN_BY:DONE', fn)`
* üß™ debug overlay (–ø–æ–∫–∞–∑ payload –Ω–∞ –µ–∫—Ä–∞–Ω—ñ)
* üì¶ –≤–∏–Ω–µ—Å—Ç–∏ –≤—Å–µ –≤ `app.dialog.js`
* üßæ –ª–æ–≥—É–≤–∞–Ω–Ω—è dialog lifecycle –≤ –ë–î

–°–∫–∞–∂–∏, —â–æ –∑ —Ü—å–æ–≥–æ –±–µ—Ä–µ–º–æ ‚Äî —ñ –¥–æ–≤–µ–¥–µ–º–æ –¥–æ —ñ–¥–µ–∞–ª—É üöÄ
