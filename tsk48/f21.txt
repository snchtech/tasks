–°—É–ø–µ—Ä –ø–∏—Ç–∞–Ω–Ω—è ‚Äî —Ü–µ —è–∫—Ä–∞–∑ **–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ —Ç–æ—á–∫–∞**, –ø—ñ—Å–ª—è —è–∫–æ—ó –≤—Å—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞—î ¬´–∑–∞–ª—ñ–∑–æ–±–µ—Ç–æ–Ω–Ω–æ—é¬ª.
–†–æ–∑–±–µ—Ä—É **—á—ñ—Ç–∫–æ —ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ**.

---

# 1Ô∏è‚É£ –Ø–∫ –ü–ï–†–ï–í–Ü–†–ò–¢–ò, —â–æ dialog –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ **root-level**

### ‚úÖ –û–∑–Ω–∞–∫–∞ ‚Ññ1 ‚Äî DOM (–Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–µ)

1. –í—ñ–¥–∫—Ä–∏–π —Å—Ç–æ—Ä—ñ–Ω–∫—É –∂—É—Ä–Ω–∞–ª—É
2. –ù–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É ‚Üí –≤—ñ–¥–∫—Ä–∏–π dialog
3. –í DevTools ‚Üí **Elements**

–¢–∏ –º–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏ —â–æ—Å—å —Ç–∏–ø—É:

```html
<body class="t-PageBody">
  ...
  <div class="ui-dialog ui-widget ui-widget-content ui-corner-all">
    <iframe src="f?p=...:2:..." />
  </div>
</body>
```

üìå **–í–ê–ñ–õ–ò–í–û**:

* `<div class="ui-dialog">` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è **–±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ `<body>`**
* –≤—ñ–Ω **–ù–ï –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ iframe —Å—Ç–æ—Ä—ñ–Ω–∫–∏ 5**
* iframe —Å—Ç–æ—Ä—ñ–Ω–∫–∏ 5 ‚Äî –æ–∫—Ä–µ–º–∏–π `<iframe>` –ø–æ—Ä—É—á

üëâ –¶–µ —ñ —î **root-level dialog**

---

### ‚ùå –Ø–∫—â–æ dialog –ù–ï root-level

–¢–∏ –ø–æ–±–∞—á–∏—à:

```html
<iframe id="page5_iframe">
  <html>
    <body>
      <div class="ui-dialog">...</div>
    </body>
  </html>
</iframe>
```

‚ùå –¶–µ —Å—Ç–∞—Ä–∏–π, –ø—Ä–æ–±–ª–µ–º–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç

---

### ‚úÖ –û–∑–Ω–∞–∫–∞ ‚Ññ2 ‚Äî JS-–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (1 —Ä—è–¥–æ–∫)

–£ **Console** (–∫–æ–ª–∏ dialog –≤—ñ–¥–∫—Ä–∏—Ç–∏–π):

```js
$('.ui-dialog').closest('body').length
```

* `1` ‚Üí dialog –Ω–∞ root
* `0` ‚Üí dialog —É—Å–µ—Ä–µ–¥–∏–Ω—ñ iframe

---

### ‚úÖ –û–∑–Ω–∞–∫–∞ ‚Ññ3 ‚Äî –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ Close Dialog

* –ó–∞–∫—Ä–∏–≤–∞—î **—Ç—ñ–ª—å–∫–∏ dialog**
* **–ù–ï –∑–∞–∫—Ä–∏–≤–∞—î page 6**
* backdrop –∑–Ω–∏–∫–∞—î –∫–æ—Ä–µ–∫—Ç–Ω–æ

–Ø–∫—â–æ page 6 –∑–∞–∫—Ä–∏–ª–∞—Å—å ‚Üí dialog –±—É–≤ ¬´–Ω–µ —Ç–∞–º¬ª

---

# 2Ô∏è‚É£ –ß–∏ –ø–æ–±–∞—á–∏—Ç—å Global Page `Dialog Closed` event?

## –ö–æ—Ä–æ—Ç–∫–æ ‚Äî **–¢–ê–ö. 100%.**

–Ü —Å–∞–º–µ **–¢–Ü–õ–¨–ö–ò –¢–ê–ö –≤—ñ–Ω —ñ –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ APEX 24**.

---

## –ß–æ–º—É Global Page –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –±–∞—á–∏—Ç—å `Dialog Closed`

### –¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞

* Global Page (Page 0) **–≤—à–∏–≤–∞—î—Ç—å—Å—è –≤ –∫–æ–∂–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É**
* `Dialog Closed` ‚Äî —Ü–µ **APEX lifecycle event**
* –≤—ñ–Ω –≤–∏–Ω–∏–∫–∞—î **–Ω–∞ root window**
* iframe –Ω–µ –±–µ—Ä–µ —É—á–∞—Å—Ç—ñ

üëâ –¢–æ–º—É:

* page 5 –º–æ–∂–µ **–Ω–µ –ø–æ–±–∞—á–∏—Ç–∏**
* page 6 –º–æ–∂–µ **–Ω–µ –ø–æ–±–∞—á–∏—Ç–∏**
* **Global Page –ø–æ–±–∞—á–∏—Ç—å –∑–∞–≤–∂–¥–∏**

---

## –Ø–∫ –ü–ï–†–ï–í–Ü–†–ò–¢–ò, —â–æ Global Page –ª–æ–≤–∏—Ç—å Close Dialog

### –¢–µ—Å—Ç ‚Ññ1 ‚Äî –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π DA

–ù–∞ **Global Page** —Å—Ç–≤–æ—Ä–∏ **—Ç–∏–º—á–∞—Å–æ–≤—É DA**:

* Event: `Dialog Closed`
* True Action ‚Üí Execute JS:

```js
alert('GLOBAL: dialog closed');
```

üëâ –í—ñ–¥–∫—Ä–∏–π –±—É–¥—å-—è–∫–∏–π dialog ‚Üí –∑–∞–∫—Ä–∏–π
üëâ Alert –∑ º—è–≤–∏–≤—Å—è = ‚úî

---

### –¢–µ—Å—Ç ‚Ññ2 ‚Äî —á–µ—Ä–µ–∑ Console (–±–µ–∑ DA)

–£ **Execute when Page Loads (Global Page)**:

```js
document.addEventListener('dialogclose', function () {
  console.log('GLOBAL dialog closed');
});
```

(–¥–ª—è jQuery UI)

---

### –¢–µ—Å—Ç ‚Ññ3 ‚Äî —Ç–≤—ñ–π —Ä–µ–∞–ª—å–Ω–∏–π –∫–µ–π—Å

1. Dialog page:

```plsql
apex_util.set_session_state('P0_DIALOG_RESULT', 'TEST');
apex_navigation.close_dialog;
```

2. Global Page DA:

```js
console.log('RESULT:', $v('P0_DIALOG_RESULT'));
```

üëâ –í –∫–æ–Ω—Å–æ–ª—ñ –º–∞—î –±—É—Ç–∏:

```
RESULT: TEST
```

---

# 3Ô∏è‚É£ –í–∞–∂–ª–∏–≤–∏–π –Ω—é–∞–Ω—Å (—â–æ–± –Ω–µ –±—É–ª–æ —Å—é—Ä–ø—Ä–∏–∑—ñ–≤)

‚ùó `Dialog Closed` **–ù–ï –∑–∞–ª–µ–∂–∏—Ç—å** –≤—ñ–¥:

* —Ö—Ç–æ –≤—ñ–¥–∫—Ä–∏–≤ dialog
* iframe / parent
* selector
* DOM

–í—ñ–Ω –∑–∞–ª–µ–∂–∏—Ç—å **—Ç—ñ–ª—å–∫–∏ –≤—ñ–¥ —Ç–æ–≥–æ**, —â–æ dialog:

* –±—É–≤ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —á–µ—Ä–µ–∑ `apex.navigation.dialog`
* –∑–∞–∫—Ä–∏–≤—Å—è —á–µ—Ä–µ–∑ `apex_navigation.close_dialog` –∞–±–æ `closeDialog()`

---

# 4Ô∏è‚É£ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —à–∞–±–ª–æ–Ω –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è

### AJAX Process

```plsql
htp.p(
  apex_page.get_url(
    p_page   => 2,
    p_items  => 'P2_TASK_ID,P2_TASK_MODE,P2_SIGNATURE_ID',
    p_values => :P5_TASK_ID || ',' || :P5_TASK_MODE || ',' || :P5_SIGNATURE_ID,
    p_request => 'DIALOG'
  )
);
```

### JS

```js
parent.apex.navigation.dialog(Data.url, {
  modal: true,
  width: 800,
  height: 'auto'
});
```

---

# 5Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (–≤–∞–∂–ª–∏–≤–æ –∑–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏)

‚úî Root-level dialog ‚Äî **–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ —î–¥–∏–Ω–æ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π** –≤–∞—Ä—ñ–∞–Ω—Ç
‚úî Global Page **–∑–∞–≤–∂–¥–∏ –ª–æ–≤–∏—Ç—å** `Dialog Closed`
‚úî iframe –±—ñ–ª—å—à–µ **–Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ª–æ–≥—ñ–∫—É**
‚úî Parent-open ‚Äî —Ü–µ –Ω–µ —Ö–∞–∫, –∞ best practice
‚úî –¢–≤–æ—è –ø–æ–¥—ñ—î–≤–∞ —Å—Ö–µ–º–∞ —Ç–µ–ø–µ—Ä **–∫–∞–Ω–æ–Ω—ñ—á–Ω–∞ –¥–ª—è APEX 24**

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –Ω–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –º–æ–∂–µ–º–æ:

* üîß –ø—Ä–∏–±—Ä–∞—Ç–∏ –≤—Å—ñ `redirect()` –∑ –ø—Ä–æ—î–∫—Ç—É
* üß™ –¥–æ–¥–∞—Ç–∏ **debug overlay** –¥–ª—è dialog lifecycle
* üß† –∑—Ä–æ–±–∏—Ç–∏ **—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π dialog manager**
* üì¶ –æ—Ñ–æ—Ä–º–∏—Ç–∏ —Ü–µ —è–∫ **–ø—Ä–æ—î–∫—Ç–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç**

–°–∫–∞–∂–∏, —â–æ –±–µ—Ä–µ–º–æ –¥–∞–ª—ñ üëå
