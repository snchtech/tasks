–î—É–∂–µ –≤–ª—É—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è üí°

### üîπ –Ø–∫ –≤–∏–≥–ª—è–¥–∞—î `raise_application_error`

–ö–æ–ª–∏ —É –ø—Ä–æ—Ü–µ—Å—ñ APEX (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É Process After Submit) –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è

```plsql
raise_application_error(-20001, '–í–∫–∞–∂—ñ—Ç—å –Ω–æ–º–µ—Ä –∑–º—ñ–Ω–∏ –∞–±–æ —á–∞—Å –ø–æ—á–∞—Ç–∫—É/–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è');
```

üëâ APEX –ø–æ–∫–∞–∂–µ —Ü–µ —è–∫ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏** —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (—á–µ—Ä–≤–æ–Ω–∏–π –±–ª–æ–∫ —ñ–∑ —Ç–µ–∫—Å—Ç–æ–º).
–¶–µ –≤–∏–≥–ª—è–¥–∞—î "—Å–∏—Å—Ç–µ–º–Ω–æ", –∞–ª–µ –Ω–µ –¥—É–∂–µ user-friendly, –±–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –∑–∞–≥–∞–ª—å–Ω–∏–π –±–∞–Ω–µ—Ä.

---

### üîπ –í–∞—Ä—ñ–∞–Ω—Ç –Ω–∞ JavaScript (–∫—Ä–∞—â–µ –¥–ª—è UX)

–ú–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É **–¥–æ —Å–∞–±–º—ñ—Ç—É** (—É Dynamic Action –Ω–∞ –∫–Ω–æ–ø–∫—É "–ó–±–µ—Ä–µ–≥—Ç–∏").

#### –ö—Ä–æ–∫–∏:

1. –ù–∞ –∫–Ω–æ–ø–∫—É "–ó–±–µ—Ä–µ–≥—Ç–∏" –∑—Ä–æ–±–∏—Ç–∏ **Dynamic Action ‚Üí Event = Click**.
2. –î–æ–¥–∞—Ç–∏ **True Action ‚Üí Execute JavaScript Code**:

```js
var shiftSymbol = $v("P1_SHIFT_SYMBOL");
var shiftNumber = $v("P1_SHIFT_NUMBER");
var shiftStart  = $v("P1_SHIFT_START");
var shiftEnd    = $v("P1_SHIFT_END");

if (!shiftSymbol) {
    apex.message.showErrors([{
        type: "error",
        location: ["inline"],
        pageItem: "P1_SHIFT_SYMBOL",
        message: "–ü–æ–ª–µ '–ó–º—ñ–Ω–∞' —î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º",
        unsafe: false
    }]);
    return false; // –±–ª–æ–∫—É—î–º–æ —Å–∞–±–º—ñ—Ç
}

if (!shiftNumber && (!shiftStart || !shiftEnd)) {
    apex.message.showErrors([{
        type: "error",
        location: ["page"],
        message: "–í–∫–∞–∂—ñ—Ç—å –Ω–æ–º–µ—Ä –∑–º—ñ–Ω–∏ –∞–±–æ —á–∞—Å –ø–æ—á–∞—Ç–∫—É/–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è",
        unsafe: false
    }]);
    return false; // –±–ª–æ–∫—É—î–º–æ —Å–∞–±–º—ñ—Ç
}

// —è–∫—â–æ –≤—Å–µ –æ–∫ ‚Üí –≤–∏–∫–æ–Ω—É—î–º–æ —Å–∞–±–º—ñ—Ç
apex.submit("SAVE");
```

üëâ –¢—É—Ç:

* –ü–æ–º–∏–ª–∫–∞ –¥–ª—è `P1_SHIFT_SYMBOL` –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä—è–º–æ –ø—ñ–¥ item.
* –ó–∞–≥–∞–ª—å–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –¥–ª—è —á–∞—Å—É/–∑–º—ñ–Ω–∏ ‚Äî —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

---

### üîπ –©–æ –∫—Ä–∞—â–µ?

* `raise_application_error` ‚Üí –ø—Ä–æ—Å—Ç—ñ—à–µ, –∞–ª–µ –º–µ–Ω—à –∑—Ä—É—á–Ω–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* JS + `apex.message.showErrors` ‚Üí –±—ñ–ª—å—à —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ: –ø—ñ–¥—Å–≤—ñ—á—É—î—Ç—å—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ –ø–æ–ª–µ –∞–±–æ –¥–∞—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ —Å–∞–±–º—ñ—Ç—É.

---

‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:

* –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **JS-–≤–∞–ª—ñ–¥–∞—Ü—ñ—é** –ø–µ—Ä–µ–¥ —Å–∞–±–º—ñ—Ç–æ–º (—â–æ–± –±—É–ª–æ –∑—Ä—É—á–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É).
* –ê —â–µ –∑–∞–ª–∏—à–∏—Ç–∏ **PL/SQL validation** –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —è–∫ "—Å—Ç—Ä–∞—Ö–æ–≤–∫—É" (–±–æ —Ö—Ç–æ—Å—å –º–æ–∂–µ –æ–±—ñ–π—Ç–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø–µ—Ä–µ–≤—ñ—Ä–∫—É).

---

–•–æ—á–µ—à, —è —Å–∫–ª–∞–¥—É –≥–æ—Ç–æ–≤–∏–π **–∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç**: JS –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–ª—ñ–∫—É —ñ PL/SQL-–≤–∞–ª—ñ–¥–∞—Ü—ñ—è —è–∫ fallback?
