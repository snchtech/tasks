–î—É–∂–µ –¥–æ–±—Ä–µ, —â–æ –≤–∏ –∑–∞–¥—É–º–∞–ª–∏—Å—è –ø—Ä–æ —Ü–µ –∑–∞—Ä–∞–∑ ‚Äî —Ü–µ –∫–ª–∞—Å–∏—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è **—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –º—ñ—Ç–æ–∫** (NFC, RFID, BLE —Ç–æ—â–æ). –ù–∏–∂—á–µ ‚Äî –ø–æ–µ—Ç–∞–ø–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è –∑ –æ–Ω–æ–≤–ª–µ–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é, —è–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –≥–Ω—É—á–∫—ñ—Å—Ç—å, —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –æ–¥–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º—ñ—Ç–æ–∫.

---

## üîπ 1. –ü—Ä–æ–±–ª–µ–º–∞

* –£ –≤–∞—Å –∑–∞—Ä–∞–∑ —î —Ç–∞–±–ª–∏—Ü—è `USER_NFC`, –∞–ª–µ –≤–æ–Ω–∞ –∂–æ—Ä—Å—Ç–∫–æ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∞ –¥–æ NFC.
* –ó‚Äô—è–≤–∏—Ç—å—Å—è RFID (–∞–±–æ —ñ–Ω—à—ñ —Ç–∏–ø–∏ –º—ñ—Ç–æ–∫), —Ç–æ–º—É –Ω–∞–∑–≤–∞ `USER_NFC` —Å—Ç–∞—î –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ—é.
* –ú–æ–∂–µ –±—É—Ç–∏ **–¥–µ–∫—ñ–ª—å–∫–∞ –º—ñ—Ç–æ–∫ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–≤—ñ –∫–∞—Ä—Ç–∫–∏ —á–∏ –±—Ä–µ–ª–æ–∫–∏).
* UID –º–æ–∂–µ **—Å–ø—ñ–≤–ø–∞–¥–∞—Ç–∏ –º—ñ–∂ —Ç–∏–ø–∞–º–∏ –º—ñ—Ç–æ–∫** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –æ–¥–Ω–∞–∫–æ–≤–∏–π HEX-–∫–æ–¥, –∞–ª–µ —Ä—ñ–∑–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª).

---

## üîπ 2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö

–ü—Ä–æ–ø–æ–Ω—É—é –∑—Ä–æ–±–∏—Ç–∏ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—à—É —Å—Ö–µ–º—É:

### **TABLE `TAG_TYPE_LU`**

(—Å–ª–æ–≤–Ω–∏–∫ —Ç–∏–ø—ñ–≤ –º—ñ—Ç–æ–∫)

```sql
CREATE TABLE TAG_TYPE_LU (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  CODE VARCHAR2(20) UNIQUE NOT NULL,  -- 'NFC', 'RFID', 'BLE', 'QR', ...
  DESCRIPTION VARCHAR2(100)
);

INSERT INTO TAG_TYPE_LU (CODE, DESCRIPTION) VALUES ('NFC', 'Near Field Communication tag');
INSERT INTO TAG_TYPE_LU (CODE, DESCRIPTION) VALUES ('RFID', 'Radio Frequency ID tag');
```

---

### **TABLE `USER_TAG`**

(—É—Å—ñ —Ç–∏–ø–∏ –º—ñ—Ç–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)

```sql
CREATE TABLE USER_TAG (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY
    CONSTRAINT PK_USER_TAG PRIMARY KEY,
  USER_ID   NUMBER       NOT NULL,
  TAG_TYPE_ID NUMBER     NOT NULL REFERENCES TAG_TYPE_LU(ID),
  TAG_CODE  VARCHAR2(64) NOT NULL, -- —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–¥ –º—ñ—Ç–∫–∏ (UID / HEX / DEC)
  CREATED_AT TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP NOT NULL,
  DATE_END  DATE,
  CONSTRAINT UK_TAG_UNIQUE UNIQUE (TAG_TYPE_ID, TAG_CODE)
);
```

---

## üîπ 3. –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

* –í —Ç–∞–±–ª–∏—Ü—ñ `TAG_TYPE_LU` –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤—Å—ñ —Ç–∏–ø–∏ –º—ñ—Ç–æ–∫ (NFC, RFID, —ñ–Ω—à—ñ).
* –¢–∞–±–ª–∏—Ü—è `USER_TAG` —î —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ—é ‚Äî –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Å –º–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–∏–ø (`TAG_TYPE_ID`) —ñ –∫–æ–¥ –º—ñ—Ç–∫–∏.
* –£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å –∑–∞–±–µ–∑–ø–µ—á—É—î –æ–±–º–µ–∂–µ–Ω–Ω—è `UNIQUE (TAG_TYPE_ID, TAG_CODE)`:

  * NFC —ñ RFID –º–æ–∂—É—Ç—å –º–∞—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤–∏–π –∫–æ–¥, –∞–ª–µ —Ü–µ **—Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏** ‚Üí –Ω–µ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç.
  * –Ø–∫—â–æ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤—Å—Ç–∞–≤–∏—Ç–∏ –¥–≤—ñ –æ–¥–Ω–∞–∫–æ–≤—ñ –º—ñ—Ç–∫–∏ —Ç–æ–≥–æ –∂ —Ç–∏–ø—É ‚Üí –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ–º–∏–ª–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ.

---

## üîπ 4. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –¥–≤—ñ –º—ñ—Ç–∫–∏

–¶–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è:

```sql
INSERT INTO USER_TAG (USER_ID, TAG_TYPE_ID, TAG_CODE)
VALUES (1001, 1, '04AABBCCDD'); -- NFC

INSERT INTO USER_TAG (USER_ID, TAG_TYPE_ID, TAG_CODE)
VALUES (1001, 2, '04AABBCCDD'); -- RFID
```

–∞–±–æ –Ω–∞–≤—ñ—Ç—å –¥–≤—ñ —Ä—ñ–∑–Ω—ñ NFC:

```sql
INSERT INTO USER_TAG (USER_ID, TAG_TYPE_ID, TAG_CODE)
VALUES (1001, 1, '04AABBCCDD');

INSERT INTO USER_TAG (USER_ID, TAG_TYPE_ID, TAG_CODE)
VALUES (1001, 1, '09FFEEDDCC');
```

---

## üîπ 5. –Ø–∫ –æ–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

1. –ü—Ä–∏ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—ñ –º—ñ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Ä–∏–º—É—î `tag_code` + `tag_type` (NFC –∞–±–æ RFID).
2. –í–∏ —Ä–æ–±–∏—Ç–µ –∑–∞–ø–∏—Ç:

   ```sql
   SELECT user_id
   FROM user_tag
   WHERE tag_code = :scanned_code
     AND tag_type_id = (SELECT id FROM tag_type_lu WHERE code = :type);
   ```
3. –Ø–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π.
4. –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç–µ —ñ–Ω—à—ñ –º–µ—Ç–æ–¥–∏ (`AUTH_METHOD_LU` ‚Üí 'MANUAL', 'NFC', 'RFID').

---

## üîπ 6. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ `AUTH_METHOD_LU`

–¢–µ–ø–µ—Ä `AUTH_METHOD_LU` –∫—Ä–∞—â–µ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –π —É–∑–≥–æ–¥–∏—Ç–∏ –∑ `TAG_TYPE_LU`, —â–æ–± –Ω–µ –¥—É–±–ª—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ:

* `AUTH_METHOD_LU` –æ–ø–∏—Å—É—î, **—è–∫** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—î—Ç—å—Å—è.
* `TAG_TYPE_LU` –æ–ø–∏—Å—É—î **—è–∫–∏–π —Ç–∏–ø –º—ñ—Ç–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è** –¥–ª—è —Ñ—ñ–∑–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.

–ü—Ä–∏–∫–ª–∞–¥:

```sql
INSERT INTO AUTH_METHOD_LU (ID, CODE) VALUES (1, 'MANUAL');
INSERT INTO AUTH_METHOD_LU (ID, CODE) VALUES (2, 'TAG');  -- —Å–ø—ñ–ª—å–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –¥–ª—è NFC/RFID
```

---

## üîπ 7. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º)

–Ø–∫—â–æ –Ω–∞–¥–∞–ª—ñ —É –≤–∞—Å –º–æ–∂—É—Ç—å –±—É—Ç–∏ **–º–µ—Ç–∞–¥–∞–Ω—ñ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –º—ñ—Ç–æ–∫** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–≤–∂–∏–Ω–∞ UID, —á–∞—Å—Ç–æ—Ç–∞, –≤–∏—Ä–æ–±–Ω–∏–∫), –º–æ–∂–Ω–∞ –≤–∏–Ω–µ—Å—Ç–∏ –æ–∫—Ä–µ–º—ñ —Ç–∞–±–ª–∏—Ü—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É:

* `NFC_TAG_DETAILS (TAG_ID, CHIPSET, MANUFACTURER, MEMORY_SIZE, ...)`
* `RFID_TAG_DETAILS (TAG_ID, FREQUENCY_MHZ, PROTOCOL, RANGE_CM, ...)`

–ê–ª–µ –Ω–∞ –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É –µ—Ç–∞–ø—ñ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ `USER_TAG` —ñ `TAG_TYPE_LU` —Ü—ñ–ª–∫–æ–º –¥–æ—Å—Ç–∞—Ç–Ω—è.

---

## üîπ –ü—ñ–¥—Å—É–º–æ–∫

| –¢–∞–±–ª–∏—Ü—è          | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                     | –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–ª—è                                                   |
| ---------------- | ------------------------------- | -------------------------------------------------------------- |
| `TAG_TYPE_LU`    | –î–æ–≤—ñ–¥–Ω–∏–∫ —Ç–∏–ø—ñ–≤ –º—ñ—Ç–æ–∫            | `ID`, `CODE`, `DESCRIPTION`                                    |
| `USER_TAG`       | –ó–≤‚Äô—è–∑–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üî –º—ñ—Ç–∫–∞      | `USER_ID`, `TAG_TYPE_ID`, `TAG_CODE`, `CREATED_AT`, `DATE_END` |
| `AUTH_METHOD_LU` | –î–æ–≤—ñ–¥–Ω–∏–∫ –º–µ—Ç–æ–¥—ñ–≤ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó | `ID`, `CODE`                                                   |

‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î NFC, RFID, —ñ–Ω—à—ñ —Ç–∏–ø–∏.
‚úÖ –û–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Äî –∫—ñ–ª—å–∫–∞ –º—ñ—Ç–æ–∫.
‚úÖ –ó–∞—Ö–∏—â–∞—î –≤—ñ–¥ –∫–æ–ª—ñ–∑—ñ–π –∫–æ–¥—ñ–≤ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤.

---

–•–æ—á–µ—Ç–µ, —è –ø–æ–∫–∞–∂—É **PL/SQL-–ø—Ä–æ—Ü–µ—Å –∞–±–æ —Ç—Ä–∏–≥–µ—Ä**, —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

* –¥–æ–¥–∞—î –Ω–æ–≤—É –º—ñ—Ç–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É;
* –∞–±–æ —è–∫—â–æ —Ç–∞–∫–∞ –º—ñ—Ç–∫–∞ –≤–∂–µ —î, –æ–Ω–æ–≤–ª—é—î `DATE_END` —ñ –ø–æ–≤–µ—Ä—Ç–∞—î `USER_ID`?
