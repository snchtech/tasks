–î—É–∂–µ –ø—Ä–æ—Å—Ç–æ ‚úÖ ‚Äî –¥–æ—Å—Ç–∞—Ç–Ω—å–æ **–¥–æ–¥–∞—Ç–∏ —É–º–æ–≤—É —É WHERE-–±–ª–æ–∫** –≤–∞—à–æ–≥–æ SQL-–∑–∞–ø–∏—Ç—É.
–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç:

```sql
SELECT 
    t.id,
    t.user_id,
    u.user_name,
    u.department_name,
    tt.code AS tag_type_name,
    t.tag_code,
    t.created_at
FROM user_tag t
JOIN users u 
    ON u.user_id = t.user_id
JOIN tag_type_lu tt 
    ON tt.id = t.tag_type_id
WHERE t.date_end IS NULL
  AND u.department_id = 11   -- ‚úÖ –≤–∏–±—ñ—Ä–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ü–µ—Ö—É
ORDER BY t.created_at DESC;
```

---

## üîπ –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ —Ü—é —É–º–æ–≤—É –¥–∏–Ω–∞–º—ñ—á–Ω–æ—é

–¢–æ–±—Ç–æ, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ **—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ —Ü–µ—Ö–æ–º (department)** –∑ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `PXX_DEPARTMENT_ID`):

```sql
WHERE t.date_end IS NULL
  AND ( :PXX_DEPARTMENT_ID IS NULL OR u.department_id = :PXX_DEPARTMENT_ID )
ORDER BY t.created_at DESC;
```

–¢–æ–¥—ñ:

* —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ **Select List** `PXX_DEPARTMENT_ID`
  (LOV: `SELECT department_name d, department_id r FROM departments ORDER BY department_name`)
* –¥–æ–¥–∞–π—Ç–µ **Dynamic Action**:

  * **Event:** Change
  * **Action:** Refresh Region (IR region)

–¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ü–µ—Ö —ñ –º–∏—Ç—Ç—î–≤–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–≤—ñ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

---

üîπ –û—Ç–∂–µ, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∑–∞–¥–∞—á—ñ:

* –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ **—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ** –ø–æ–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ —Ü–µ—Ö ‚Ññ11 ‚Üí –¥–æ–¥–∞—î–º–æ `AND u.department_id = 11`
* –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ **–¥–∏–Ω–∞–º—ñ—á–Ω–æ** —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `:PXX_DEPARTMENT_ID` —ñ Refresh Region

–•–æ—á–µ—Ç–µ, —è –ø–æ–∫–∞–∂—É, —è–∫ —Å–∞–º–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä-select –¥–ª—è —Ü–µ—Ö—ñ–≤ —ñ–∑ –∞–≤—Ç–æ–ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ—é —É –≤–∞—à IR?
