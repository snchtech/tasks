–û, —Ç–∞–∫ –±—É–¥–µ —â–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—à–µ ‚úÖ ‚Äî –∑–∞–º—ñ—Å—Ç—å `Text type = time` –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **Date Picker (Datetime Picker)** –∑ —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞—Ç–∏ –π —á–∞—Å—É.

APEX `Date Picker` —É —Ä–µ–∂–∏–º—ñ **HTML5 Default** –¥—ñ–π—Å–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ ISO-8601, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```
2020-04-15T11:02:00.000000Z
```

üëâ –¶–µ –∑–≤–∏—á–∞–π–Ω–∏–π —Ç–µ–∫—Å—Ç, –∞–ª–µ Oracle –ª–µ–≥–∫–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î –π–æ–≥–æ —É `DATE` —á–µ—Ä–µ–∑ `TO_TIMESTAMP_TZ`.

---

## üîπ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–∏–π –±–ª–æ–∫ –∫–æ–¥—É

```plsql
DECLARE
    v_shift_start DATE;
    v_shift_end   DATE;
BEGIN
    IF :P1_SHIFT_NUMBER IS NOT NULL THEN
        -- üîπ –Ø–∫—â–æ –≤–∏–±—Ä–∞–Ω–æ –Ω–æ–º–µ—Ä –∑–º—ñ–Ω–∏ ‚Üí –±–µ—Ä–µ–º–æ —á–∞—Å —ñ–∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞
        SELECT TRUNC(SYSDATE) + (TIME_START - TRUNC(TIME_START)),
               CASE 
                   WHEN TIME_END < TIME_START 
                   THEN TRUNC(SYSDATE+1) + (TIME_END - TRUNC(TIME_END))
                   ELSE TRUNC(SYSDATE)   + (TIME_END - TRUNC(TIME_END))
               END
        INTO v_shift_start, v_shift_end
        FROM DEPARTMENT_SHIFT_NUMBER
        WHERE DEPARTMENT_ID   = :P0_DEPARTMENT_ID
          AND SHIFT_NUMBER_ID = :P1_SHIFT_NUMBER;

    ELSE
        -- üîπ –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∫–∞–∑–∞–≤ —á–∞—Å –≤—Ä—É—á–Ω—É (Date Picker ‚Üí ISO-8601)
        v_shift_start := CAST(
                           TO_TIMESTAMP_TZ(:P1_SHIFT_START, 'YYYY-MM-DD"T"HH24:MI:SS.FF6TZR')
                           AS DATE
                         );

        v_shift_end   := CAST(
                           TO_TIMESTAMP_TZ(:P1_SHIFT_END, 'YYYY-MM-DD"T"HH24:MI:SS.FF6TZR')
                           AS DATE
                         );
    END IF;

    -- –ø—Ä–∏–∫–ª–∞–¥ –≤—Å—Ç–∞–≤–∫–∏ —É –ª–æ–≥
    INSERT INTO SHIFT_PERSONAL_LOGGER (
        TAB_NO,
        DEPARTMENT_ID,
        POSITION_ID,
        SHIFT_SYMBOL_ID,
        SHIFT_NUMBER_ID,
        TIME_START,
        TIME_END,
        SOURCE_APP,
        CREATED_BY
    ) VALUES (
        :P0_CUR_USER_TABNO,
        :P0_CUR_USER_DEPARTMENT,
        :P0_CUR_USER_POSITION,
        :P1_SHIFT_SYMBOL,
        :P1_SHIFT_NUMBER,
        v_shift_start,
        v_shift_end,
        :APP_ID,
        :APP_USER
    );
END;
```

---

## üîπ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å

* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ `TO_TIMESTAMP_TZ(..., 'YYYY-MM-DD"T"HH24:MI:SS.FF6TZR')` ‚Üí —â–æ–± –ø–∞—Ä—Å–∏—Ç–∏ ISO-8601 –∑ `Z` (UTC).
* –ü–æ—Ç—ñ–º `CAST(... AS DATE)` ‚Üí –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î `TIMESTAMP WITH TIME ZONE` —É –ø—Ä–æ—Å—Ç–∏–π `DATE`.

---

‚úÖ –¢–∞–∫–∏–º —á–∏–Ω–æ–º:

* –Ø–∫—â–æ –≤–∏–±–∏—Ä–∞—î—Ç–µ –Ω–æ–º–µ—Ä –∑–º—ñ–Ω–∏ ‚Üí –ø—Ä–∞—Ü—é—î —Å—Ç–∞—Ä–∞ –ª–æ–≥—ñ–∫–∞ –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–æ–º.
* –Ø–∫—â–æ –≤–≤–æ–¥–∏—Ç–µ —á–∞—Å –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ Date Picker (–Ω–∞–≤—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å) ‚Üí –≤–æ–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ —É `DATE` —ñ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –ª–æ–≥.

---

–•–æ—á–µ—Ç–µ, —è —â–µ –¥–æ–¥–∞–º —É —Ü–µ–π –±–ª–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —â–æ `v_shift_end > v_shift_start`, —ñ–Ω–∞–∫—à–µ –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `raise_application_error`?
