–°—É–ø–µ—Ä, –¥—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –±—É–¥—É—î—Ç–µ –ª–æ–≥—ñ–∫—É üëå
–Ø —Ä–æ–∑–ø–∏—à—É –ø–æ–∫—Ä–æ–∫–æ–≤–æ, —è–∫ —Ü–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ Oracle APEX.

---

## üîπ 1. –ó–∞–≥–∞–ª—å–Ω–∏–π –ø—Ä–∏–Ω—Ü–∏–ø

1. **–ü—Ä–∏ –∑–∞—Ö–æ–¥—ñ –Ω–∞ –±—É–¥—å-—è–∫—É —Å—Ç–æ—Ä—ñ–Ω–∫—É** ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î —Ä–æ–ª—å `shift_personal`.
2. –Ø–∫—â–æ **–Ω–µ–º–∞—î –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É** –≤ `SHIFT_PERSONAL_LOGGER` ‚Üí –ø–æ–∫–∞–∑—É—î–º–æ —Ñ–æ—Ä–º—É –¥–ª—è –≤–∏–±–æ—Ä—É –∑–º—ñ–Ω–∏.
3. –Ø–∫—â–æ **—î –∞–∫—Ç—É–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Å** ‚Üí –∑–∞–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ –∑ —Ç–∞–±–ª–∏—Ü—ñ —ñ –≤–∏—Å—Ç–∞–≤–ª—è—î–º–æ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ñ item (`P0_SHIFT_SYMBOL`, `P0_SHIFT_NUMBER`, `P0_SHIFT_START`, `P0_SHIFT_END`), –ø—ñ—Å–ª—è —á–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É.

---

## üîπ 2. –¢–∞–±–ª–∏—Ü—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

SQL –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ "–∞–∫—Ç–∏–≤–Ω–æ–≥–æ" –∑–∞–ø–∏—Å—É:

```sql
SELECT l.SHIFT_SYMBOL_ID,
       l.SHIFT_NUMBER_ID,
       l.TIME_START,
       l.TIME_END
  FROM SHIFT_PERSONAL_LOGGER l
 WHERE l.TAB_NO = :APP_USER_TABNO
   AND l.IS_ACTIVE = 'Y'
   AND SYSDATE BETWEEN l.TIME_START AND l.TIME_END
ORDER BY l.TIME_START DESC
FETCH FIRST 1 ROWS ONLY
```

---

## üîπ 3. –ì–ª–æ–±–∞–ª—å–Ω—ñ Item-–∏

–ù–∞ **Global Page** —Å—Ç–≤–æ—Ä—ñ—Ç—å item-–∏:

* `P0_SHIFT_SYMBOL` (Hidden, text –∞–±–æ display-only)
* `P0_SHIFT_NUMBER`
* `P0_SHIFT_START`
* `P0_SHIFT_END`

---

## üîπ 4. Dynamic Action –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 4.1. –ö–æ–ª–∏ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î

* –ù–∞ **Page Load** (–∞–±–æ –∫—Ä–∞—â–µ `When Page Loads` –Ω–∞ Global Page).

### 4.2. Server-side Code (PL/SQL):

```plsql
DECLARE
    v_symbol_id   NUMBER;
    v_number_id   NUMBER;
    v_time_start  DATE;
    v_time_end    DATE;
BEGIN
    BEGIN
        SELECT l.SHIFT_SYMBOL_ID,
               l.SHIFT_NUMBER_ID,
               l.TIME_START,
               l.TIME_END
        INTO   v_symbol_id,
               v_number_id,
               v_time_start,
               v_time_end
        FROM SHIFT_PERSONAL_LOGGER l
        WHERE l.TAB_NO = :APP_USER_TABNO
          AND l.IS_ACTIVE = 'Y'
          AND SYSDATE BETWEEN l.TIME_START AND l.TIME_END
        ORDER BY l.TIME_START DESC
        FETCH FIRST 1 ROWS ONLY;
        
        -- –Ø–∫—â–æ –∑–Ω–∞–π—à–ª–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –∑–∞–ø–∏—Å ‚Üí –∑–∞–ø–æ–≤–Ω—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—ñ item
        :P0_SHIFT_SYMBOL := v_symbol_id;
        :P0_SHIFT_NUMBER := v_number_id;
        :P0_SHIFT_START  := v_time_start;
        :P0_SHIFT_END    := v_time_end;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            NULL; -- –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏–º–æ ‚Üí —Ñ–æ—Ä–º–∞ –±—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–∞
    END;
END;
```

üëâ –£ "Items to Return" –≤–∫–∞–∂—ñ—Ç—å: `P0_SHIFT_SYMBOL, P0_SHIFT_NUMBER, P0_SHIFT_START, P0_SHIFT_END`

---

## üîπ 5. –õ–æ–≥—ñ–∫–∞ –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

* –Ø–∫—â–æ item-–∏ **–Ω–µ NULL** (—Ç–æ–±—Ç–æ –∑–Ω–∞–π—à–ª–∏ –∑–∞–ø–∏—Å):
  ‚Üí —Ä–æ–±–∏—Ç–µ **Branch** –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É (`f?p=&APP_ID.:1:&SESSION.`).

* –Ø–∫—â–æ item-–∏ **NULL** ‚Üí –ø–æ–∫–∞–∑—É—î—Ç–µ —Ñ–æ—Ä–º—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–µ–≥—ñ–æ–Ω "–í–∏–±—ñ—Ä –∑–º—ñ–Ω–∏"), –¥–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∫–∞–∂–µ `SHIFT_SYMBOL_ID`, `SHIFT_NUMBER_ID` –∞–±–æ `TIME_START/TIME_END`.

---

## üîπ 6. –ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø–æ–≤–Ω—é—î —Ñ–æ—Ä–º—É

1. –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `SHIFT_PERSONAL_LOGGER` (—á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å Insert).
2. –í—ñ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è Insert ‚Üí –¥–∏–Ω–∞–º—ñ—á–Ω–æ –ø—Ä–æ—Å—Ç–∞–≤–ª—è—î—Ç–µ —Ç—ñ –∂ –∑–Ω–∞—á–µ–Ω–Ω—è —É –≥–ª–æ–±–∞–ª—å–Ω—ñ item-–∏ (`P0_SHIFT_SYMBOL`, `P0_SHIFT_NUMBER`, `P0_SHIFT_START`, `P0_SHIFT_END`).
3. –†–æ–±–∏—Ç–µ Redirect ‚Üí –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–æ–¥–∞—Ç–∫—É.

---

‚úÖ –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –æ–¥–∏–Ω —Ä–∞–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ñ–æ—Ä–º—É, –∞ –¥–∞–ª—ñ –≤—Å—ñ –¥–æ–¥–∞—Ç–∫–∏ –±—É–¥—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ç—è–≥—É–≤–∞—Ç–∏ –π–æ–≥–æ –∞–∫—Ç–∏–≤–Ω—É –∑–º—ñ–Ω—É –∑ `SHIFT_PERSONAL_LOGGER`.

---

–•–æ—á–µ—Ç–µ, —è –Ω–∞–ø–∏—à—É **–ø–æ–≤–Ω–∏–π PL/SQL –ø—Ä–æ—Ü–µ—Å Insert —É SHIFT\_PERSONAL\_LOGGER**, —è–∫–∏–π —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –≤–∏–∑–Ω–∞—á–∞—Ç–∏–º–µ `TIME_END` —ñ–∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ `DEPARTMENT_SHIFT_NUMBER` (—è–∫—â–æ –≤–∫–∞–∑–∞–Ω–æ `SHIFT_NUMBER_ID`), –∞ —è–∫—â–æ –Ω—ñ ‚Äî –±—Ä–∞—Ç–∏–º–µ —á–∞—Å —ñ–∑ —Ñ–æ—Ä–º–∏?
