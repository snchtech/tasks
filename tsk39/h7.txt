–û, –¥—É–∂–µ —Å–ª—É—à–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è ‚úÖ
–£ –≤–∞—Å –¥—ñ–π—Å–Ω–æ –¥–≤–∞ —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó:

1. **–î–∞—Ç–∞/—á–∞—Å –∑–∞—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –¥–æ–¥–∞—Ç–æ–∫** (—Ñ–∞–∫—Ç–∏—á–Ω–∏–π `LOG_DATE`) ‚Üí —Ü–µ —á–∞—Å –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–∫—Ä–∏–≤ —Å–∏—Å—Ç–µ–º—É.
2. **–î–∞—Ç–∞/—á–∞—Å –ø–æ—á–∞—Ç–∫—É/–∫—ñ–Ω—Ü—è –∑–º—ñ–Ω–∏** ‚Üí —Ü–µ –º–∞—î –±—Ä–∞—Ç–∏—Å—è –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ `DEPARTMENT_SHIFT_NUMBER`, —â–æ–± —á—ñ—Ç–∫–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —Ä–æ–±–æ—á–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª.

---

## üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ —Ç–∞–±–ª–∏—Ü—ñ `SHIFT_PERSONAL_LOGGER`

```sql
CREATE TABLE SHIFT_PERSONAL_LOGGER (
    ID               NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    LOG_DATE         DATE DEFAULT SYSDATE NOT NULL,   -- —á–∞—Å —Ñ–∞–∫—Ç–∏—á–Ω–æ–≥–æ –≤—Ö–æ–¥—É –≤ —Å–∏—Å—Ç–µ–º—É
    TAB_NO           NUMBER NOT NULL,
    DEPARTMENT_ID    NUMBER NOT NULL,
    POSITION_ID      NUMBER,
    SHIFT_SYMBOL_ID  NUMBER,
    SHIFT_NUMBER_ID  NUMBER,
    SHIFT_START      DATE NOT NULL,                  -- –ø–æ—á–∞—Ç–æ–∫ –∑–º—ñ–Ω–∏ (–∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞)
    SHIFT_END        DATE NOT NULL,                  -- –∫—ñ–Ω–µ—Ü—å –∑–º—ñ–Ω–∏ (–∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞)
    SOURCE_APP       VARCHAR2(50),
    CREATED_BY       VARCHAR2(100) DEFAULT USER,
    CREATED_AT       DATE DEFAULT SYSDATE,
    UPDATED_BY       VARCHAR2(100),
    UPDATED_AT       DATE,
    IS_ACTIVE        CHAR(1) DEFAULT 'Y' CHECK (IS_ACTIVE IN ('Y','N'))
);
```

---

## üìå –õ–æ–≥—ñ–∫–∞ –≤—Å—Ç–∞–≤–∫–∏

* `LOG_DATE` ‚Üí –∑–∞–≤–∂–¥–∏ `SYSDATE`, —Ü–µ –º–æ–º–µ–Ω—Ç –≤—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* `SHIFT_START` / `SHIFT_END` ‚Üí –∑–∞–≤–∂–¥–∏ –±–µ—Ä—É—Ç—å—Å—è –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ `DEPARTMENT_SHIFT_NUMBER`, —è–∫—â–æ –∑–∞–¥–∞–Ω–æ `SHIFT_NUMBER_ID`.
* –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —Å–≤—ñ–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä—É—á–Ω—É ‚Üí —Ç–æ–¥—ñ `SHIFT_START`/`SHIFT_END` = –≤–≤–µ–¥–µ–Ω—ñ –¥–∞—Ç–∏.

---

## üìå –ö–æ–¥ –ø—Ä–æ—Ü–µ—Å—É –≤ APEX

```plsql
DECLARE
    v_shift_start DATE;
    v_shift_end   DATE;
BEGIN
    -- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–±—Ä–∞–≤ –Ω–æ–º–µ—Ä –∑–º—ñ–Ω–∏
    IF :P0_SHIFT_NUMBER IS NOT NULL THEN
        SELECT 
            TRUNC(SYSDATE, 'DD') + (CAST(TO_CHAR(TIME_START, 'HH24:MI:SS') AS INTERVAL DAY TO SECOND)),
            TRUNC(SYSDATE, 'DD') + (CAST(TO_CHAR(TIME_END,   'HH24:MI:SS') AS INTERVAL DAY TO SECOND))
        INTO v_shift_start, v_shift_end
        FROM DEPARTMENT_SHIFT_NUMBER
        WHERE DEPARTMENT_ID   = :P0_DEPARTMENT_ID
          AND SHIFT_NUMBER_ID = :P0_SHIFT_NUMBER;

    ELSE
        -- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ —Å–≤—ñ–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä—É—á–Ω—É
        v_shift_start := :P0_SHIFT_START;
        v_shift_end   := :P0_SHIFT_END;
    END IF;

    -- –í—Å—Ç–∞–≤–∫–∞ —É —Ç–∞–±–ª–∏—Ü—é
    INSERT INTO SHIFT_PERSONAL_LOGGER (
        TAB_NO,
        DEPARTMENT_ID,
        POSITION_ID,
        SHIFT_SYMBOL_ID,
        SHIFT_NUMBER_ID,
        SHIFT_START,
        SHIFT_END,
        SOURCE_APP,
        CREATED_BY
    ) VALUES (
        :P0_TAB_NO,
        :P0_DEPARTMENT_ID,
        :P0_POSITION_ID,
        :P0_SHIFT_SYMBOL,
        :P0_SHIFT_NUMBER,
        v_shift_start,
        v_shift_end,
        :APP_ID,
        :APP_USER
    )
    RETURNING SHIFT_SYMBOL_ID, SHIFT_NUMBER_ID, SHIFT_START, SHIFT_END
    INTO :P0_SHIFT_SYMBOL, :P0_SHIFT_NUMBER, :P0_SHIFT_START, :P0_SHIFT_END;
END;
```

---

## üìå –©–æ —Ü–µ –¥–∞—î

* –í–∏ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—î—Ç–µ **–∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–µ–∞–ª—å–Ω–æ –∑–∞–π—à–æ–≤** (`LOG_DATE`).
* –í–∏ —á—ñ—Ç–∫–æ —Ñ—ñ–∫—Å—É—î—Ç–µ **—Ä–æ–±–æ—á–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –∑–º—ñ–Ω–∏** (`SHIFT_START`‚Äì`SHIFT_END`), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–π—à–æ–≤ –ø—ñ–∑–Ω—ñ—à–µ –ø–æ—á–∞—Ç–∫—É –∑–º—ñ–Ω–∏.
* –£ –∑–≤—ñ—Ç–∞—Ö –º–æ–∂–Ω–∞ –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ "—á–∞—Å –≤—Ö–æ–¥—É", —ñ "–ø–µ—Ä—ñ–æ–¥ –∑–º—ñ–Ω–∏".

---

üëâ –•–æ—á–µ—Ç–µ, —è –ø—ñ–¥–≥–æ—Ç—É—é —â–µ **SQL –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—ó –∑–º—ñ–Ω–∏** –Ω–∞ –≤—Ö–æ–¥—ñ –≤ –¥–æ–¥–∞—Ç–æ–∫ (—â–æ–± –∞–±–æ –ø–æ–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º—É, –∞–±–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–Ω—É—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–∞–ª—ñ)?
