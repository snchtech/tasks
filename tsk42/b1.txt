–û, —Ü–µ –¥—É–∂–µ —Å–ª—É—à–Ω–∞ –¥—É–º–∫–∞ üëç
–í–∏ —Ö–æ—á–µ—Ç–µ –∑–∞–≤–µ—Å—Ç–∏ —â–µ –æ–¥–∏–Ω **—Å–ª—É–∂–±–æ–≤–∏–π item `P0_SHIFT_LOGGER_ID`**, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á (`ID`) –∑ —Ç–∞–±–ª–∏—Ü—ñ `SHIFT_PERSONAL_LOGGER`. –¢–æ–¥—ñ:

* –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–ø–∏—Å—É ‚Üí –≤—ñ–¥—Ä–∞–∑—É –∑–±–µ—Ä—ñ–≥–∞—î—Ç–µ `ID` –≤ item;
* –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ‚Üí –ø—ñ–¥—Ç—è–≥—É—î—Ç–µ `ID` —Ä–∞–∑–æ–º –∑ —Ä–µ—à—Ç–æ—é –¥–∞–Ω–∏—Ö;
* –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ `P0_SHIFT_INFO` ‚Üí –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç–µ —Ñ–æ—Ä–º—É –≤ —Ä–µ–∂–∏–º—ñ **update** (–∞ –Ω–µ insert), –ø–µ—Ä–µ–¥–∞—é—á–∏ —Ü–µ–π `ID`.

---

### üîπ –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ –ø–æ –∫—Ä–æ–∫–∞—Ö

#### 1. –î–æ–¥–∞—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π item

–ù–∞ **Global Page (0)** —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π item:

* `P0_SHIFT_LOGGER_ID` (Hidden, Protected).

---

#### 2. –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–ø–∏—Å—É –≤ –ª–æ–≥–≥–µ—Ä

–£ –ø—Ä–æ—Ü–µ—Å—ñ –≤—Å—Ç–∞–≤–∫–∏ (`INSERT INTO SHIFT_PERSONAL_LOGGER`) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `RETURNING INTO`:

```plsql
DECLARE
    v_new_id SHIFT_PERSONAL_LOGGER.ID%TYPE;
BEGIN
    INSERT INTO SHIFT_PERSONAL_LOGGER (
        TAB_NO,
        DEPARTMENT_ID,
        POSITION_ID,
        SHIFT_SYMBOL_ID,
        SHIFT_NUMBER_ID,
        TIME_START,
        TIME_END,
        SOURCE_APP,
        CREATED_BY
    )
    VALUES (
        :P0_CUR_USER_TABNO,
        :P0_CUR_USER_DEPARTMENT,
        :P0_CUR_USER_POSITION,
        :P1_SHIFT_SYMBOL,
        :P1_SHIFT_NUMBER,
        :P1_SHIFT_START,
        :P1_SHIFT_END,
        :APP_ID,
        :APP_USER
    )
    RETURNING ID INTO v_new_id;

    -- –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —É –≥–ª–æ–±–∞–ª—å–Ω–∏–π item
    :P0_SHIFT_LOGGER_ID := v_new_id;
END;
```

---

#### 3. –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–µ—Å—ñ—ó (Page Load Global)

–£ –∫–æ–¥—ñ, –¥–µ –≤–∏ –≤–∏–±–∏—Ä–∞—î—Ç–µ –∞–∫—Ç–∏–≤–Ω—É –∑–º—ñ–Ω—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –¥–æ–ø–∏—à—ñ—Ç—å:

```plsql
SELECT l.ID,
       l.SHIFT_SYMBOL_ID,
       l.SHIFT_NUMBER_ID,
       l.TIME_START,
       l.TIME_END
INTO   :P0_SHIFT_LOGGER_ID,
       :P0_SHIFT_SYMBOL,
       :P0_SHIFT_NUMBER,
       :P0_SHIFT_START,
       :P0_SHIFT_END
FROM SHIFT_PERSONAL_LOGGER l
WHERE l.TAB_NO = :APP_USER_TABNO
  AND l.IS_ACTIVE = 'Y'
  AND SYSDATE BETWEEN l.TIME_START AND l.TIME_END
ORDER BY l.TIME_START DESC
FETCH FIRST 1 ROWS ONLY;
```

---

#### 4. –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ `P0_SHIFT_INFO`

* –î–æ–¥–∞—î—Ç–µ **DA ‚Üí Click** –Ω–∞ `P0_SHIFT_INFO`.
* True Action: **Redirect to Page in Modal Dialog**.
* –ü–µ—Ä–µ–¥–∞—î—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä:

  * `P10_SHIFT_LOGGER_ID = &P0_SHIFT_LOGGER_ID.`

---

#### 5. –ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ 10 (—Ñ–æ—Ä–º–∞ –≤–∏–±–æ—Ä—É/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–∏)

* –Ø–∫—â–æ `P10_SHIFT_LOGGER_ID` **–ø–µ—Ä–µ–¥–∞–Ω–∏–π** ‚Üí —Ä–æ–±–∏—Ç–µ **Automatic Row Fetch (DML)** –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `SHIFT_PERSONAL_LOGGER`.
* –Ø–∫—â–æ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Üí —Ñ–æ—Ä–º–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —É —Ä–µ–∂–∏–º—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É.

---

### üîπ –ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

* –í–µ—Å—å —á–∞—Å –ø—Ä–∞—Ü—é—î—Ç–µ –∑ —Ä–µ–∞–ª—å–Ω–∏–º ID, –Ω–µ —Ç—Ä–µ–±–∞ —à—É–∫–∞—Ç–∏ –ø–æ TAB_NO —ñ –¥–∞—Ç–∞—Ö.
* –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —á–∞—Å) —Ä–æ–±–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É —á–µ—Ä–µ–∑ PK.
* –°–ø—Ä–æ—â—É—î—Ç—å—Å—è –ª–æ–≥—ñ–∫–∞: `INSERT` –ø—Ä–∏ –ø—É—Å—Ç–æ–º—É ID, `UPDATE` –ø—Ä–∏ —ñ—Å–Ω—É—é—á–æ–º—É ID.

---

–•–æ—á–µ—Ç–µ, —è –∑—Ä–∞–∑—É –ø—ñ–¥–≥–æ—Ç—É—é —à–∞–±–ª–æ–Ω **DML –ø—Ä–æ—Ü–µ—Å—ñ–≤** –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ 10, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ PL/SQL —Ä–æ–±–∏—Ç–∏ `INSERT/UPDATE` –≤ `SHIFT_PERSONAL_LOGGER`?
