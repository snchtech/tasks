–î–æ–±—Ä–µ üëç, –¥–∞–≤–∞–π—Ç–µ –∑—Ä–æ–±–∏–º–æ —Ü–µ –∞–∫—É—Ä–∞—Ç–Ω–æ –π —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ:

---

## üîπ –õ–æ–≥—ñ–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ 10 (—Ñ–æ—Ä–º–∞ –∑–º—ñ–Ω–∏)

1. –ú–∞—î–º–æ **Item**: `P10_SHIFT_LOGGER_ID`.

   * –Ø–∫—â–æ –≤—ñ–Ω `NULL` ‚Üí —Ñ–æ—Ä–º–∞ –≤ —Ä–µ–∂–∏–º—ñ **—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** (Insert).
   * –Ø–∫—â–æ –Ω–µ `NULL` ‚Üí —Ñ–æ—Ä–º–∞ –≤ —Ä–µ–∂–∏–º—ñ **—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** (Update).

2. –ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –¥–≤—ñ –∫–Ω–æ–ø–∫–∏:

   * `CREATE_BTN` ‚Äì –≤–∏–¥–∏–º–∞ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ `P10_SHIFT_LOGGER_ID IS NULL`.
   * `UPDATE_BTN` ‚Äì –≤–∏–¥–∏–º–∞ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ `P10_SHIFT_LOGGER_ID IS NOT NULL`.

3. –î–≤–∞ –æ–∫—Ä–µ–º–∏—Ö **Process** (–ø—ñ—Å–ª—è Submit):

   * **Process Create** (Insert).
   * **Process Update** (Update by ID).

---

## üîπ 1. –£–º–æ–≤–Ω–∞ –≤–∏–¥–∏–º—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫

–î–ª—è `CREATE_BTN` ‚Üí Server-side condition:

```plsql
:P10_SHIFT_LOGGER_ID IS NULL
```

–î–ª—è `UPDATE_BTN` ‚Üí Server-side condition:

```plsql
:P10_SHIFT_LOGGER_ID IS NOT NULL
```

---

## üîπ 2. –ü—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (Insert)

```plsql
DECLARE
    v_new_id SHIFT_PERSONAL_LOGGER.ID%TYPE;
BEGIN
    INSERT INTO SHIFT_PERSONAL_LOGGER (
        TAB_NO,
        DEPARTMENT_ID,
        POSITION_ID,
        SHIFT_SYMBOL_ID,
        SHIFT_NUMBER_ID,
        TIME_START,
        TIME_END,
        SOURCE_APP,
        CREATED_BY
    ) VALUES (
        :P0_CUR_USER_TABNO,
        :P0_CUR_USER_DEPARTMENT,
        :P0_CUR_USER_POSITION,
        :P10_SHIFT_SYMBOL,
        :P10_SHIFT_NUMBER,
        :P10_SHIFT_START,
        :P10_SHIFT_END,
        :APP_ID,
        :APP_USER
    )
    RETURNING ID INTO v_new_id;

    :P10_SHIFT_LOGGER_ID := v_new_id;
END;
```

---

## üîπ 3. –ü—Ä–æ—Ü–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (Update)

```plsql
BEGIN
    UPDATE SHIFT_PERSONAL_LOGGER
       SET SHIFT_SYMBOL_ID = :P10_SHIFT_SYMBOL,
           SHIFT_NUMBER_ID = :P10_SHIFT_NUMBER,
           TIME_START      = :P10_SHIFT_START,
           TIME_END        = :P10_SHIFT_END,
           UPDATED_BY      = :APP_USER,
           UPDATED_AT      = SYSDATE
     WHERE ID = :P10_SHIFT_LOGGER_ID;
     
    -- —è–∫—â–æ –∑–∞–ø–∏—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –º–æ–∂–Ω–∞ –ø—ñ–¥–Ω—è—Ç–∏ –ø–æ–º–∏–ª–∫—É
    IF SQL%ROWCOUNT = 0 THEN
        RAISE_APPLICATION_ERROR(-20001, '–ó–∞–ø–∏—Å –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.');
    END IF;
END;
```

---

## üîπ 4. –ö—É–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ Insert/Update –º–æ–∂–Ω–∞:

* **–ó–∞–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ** —ñ
* **–æ–Ω–æ–≤–∏—Ç–∏ Global Items** (`P0_SHIFT_SYMBOL`, `P0_SHIFT_NUMBER`, `P0_SHIFT_START`, `P0_SHIFT_END`, `P0_SHIFT_LOGGER_ID`) —á–µ—Ä–µ–∑ DA ‚Üí Set Value.

---

–¢–∞–∫–∏–º —á–∏–Ω–æ–º:

* –ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –±–µ–∑ `ID` ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **–°—Ç–≤–æ—Ä–∏—Ç–∏**, –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è Insert.
* –ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ `ID` ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **–û–Ω–æ–≤–∏—Ç–∏**, –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è Update –ø–æ —Ü—å–æ–º—É ID.

---

–•–æ—á–µ—Ç–µ, —è –ø—ñ–¥–≥–æ—Ç—É—é –¥–ª—è –≤–∞—Å —â–µ **Dynamic Action –Ω–∞ Close Dialog**, —è–∫–∏–π –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±—É–¥–µ –æ–¥—Ä–∞–∑—É –ø—ñ–¥—Å—Ç–∞–≤–ª—è—Ç–∏ –≤–∏–±—Ä–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –≥–ª–æ–±–∞–ª—å–Ω—ñ item `P0_SHIFT_*`?
